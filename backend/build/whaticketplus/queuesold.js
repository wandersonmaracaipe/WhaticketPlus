const a390_0x19d92f=a390_0x43c3;(function(_0x43208a,_0xbcbddb){const _0x30efe4=a390_0x43c3,_0x1440ca=_0x43208a();while(!![]){try{const _0x162461=parseInt(_0x30efe4(0x333))/0x1+parseInt(_0x30efe4(0x369))/0x2+-parseInt(_0x30efe4(0x24a))/0x3+-parseInt(_0x30efe4(0x3d2))/0x4+-parseInt(_0x30efe4(0x3f6))/0x5+parseInt(_0x30efe4(0x1fd))/0x6*(-parseInt(_0x30efe4(0x1e1))/0x7)+-parseInt(_0x30efe4(0x36b))/0x8*(-parseInt(_0x30efe4(0x374))/0x9);if(_0x162461===_0xbcbddb)break;else _0x1440ca['push'](_0x1440ca['shift']());}catch(_0x5124d2){_0x1440ca['push'](_0x1440ca['shift']());}}}(a390_0x5bda,0x5c933));const a390_0x21d8cc=(function(){const _0xd744e0=a390_0x43c3,_0x2e6f37={};_0x2e6f37['Qbezb']=function(_0x2d1719,_0x324a41){return _0x2d1719!==_0x324a41;},_0x2e6f37['cXVgA']='ptZoW',_0x2e6f37['Isfut']='TZQGm',_0x2e6f37[_0xd744e0(0x3f2)]=_0xd744e0(0x345);const _0x10011f=_0x2e6f37;let _0x352f4b=!![];return function(_0x49ea12,_0x4fd9ac){const _0x467f97=_0xd744e0;if(_0x10011f[_0x467f97(0x392)]!==_0x10011f[_0x467f97(0x3f2)]){const _0x4108ce=_0x352f4b?function(){const _0x5a5d55=_0x467f97;if(_0x4fd9ac){if(_0x10011f['Qbezb'](_0x10011f['cXVgA'],_0x10011f['cXVgA'])){if(_0x4bdc77){const _0x2a645f=_0x55d26b[_0x5a5d55(0x307)](_0x2dc009,arguments);return _0x1d40cb=null,_0x2a645f;}}else{const _0x389756=_0x4fd9ac['apply'](_0x49ea12,arguments);return _0x4fd9ac=null,_0x389756;}}}:function(){};return _0x352f4b=![],_0x4108ce;}else _0x17511c[_0x467f97(0x266)](_0x4957f0[_0x467f97(0x31f)]);};}()),a390_0x273056=a390_0x21d8cc(this,function(){const _0x4c5664=a390_0x43c3,_0x336546={};_0x336546[_0x4c5664(0x378)]=_0x4c5664(0x1fa);const _0x498fd3=_0x336546;return a390_0x273056[_0x4c5664(0x291)]()[_0x4c5664(0x295)](_0x498fd3[_0x4c5664(0x378)])[_0x4c5664(0x291)]()[_0x4c5664(0x3ac)](a390_0x273056)[_0x4c5664(0x295)](_0x498fd3['VjGGr']);});a390_0x273056();const a390_0xded5e0=(function(){const _0x411d19=a390_0x43c3,_0xdbb736={'spAWe':function(_0x47f3a0,_0x4e827c){return _0x47f3a0===_0x4e827c;},'wIbAw':_0x411d19(0x22f),'CQbnC':function(_0x578317,_0x4cdd63){return _0x578317(_0x4cdd63);},'ItDrp':function(_0x4019f6,_0x40319d,_0x5c668b,_0x4245f5){return _0x4019f6(_0x40319d,_0x5c668b,_0x4245f5);},'LHaRE':_0x411d19(0x3e6)};let _0x281619=!![];return function(_0x195a5c,_0x3f3e07){const _0x3c4118=_0x411d19,_0xde3f4c={'GwgOJ':function(_0xf951ab,_0x478802){return _0xdbb736['CQbnC'](_0xf951ab,_0x478802);},'xqDMv':function(_0x30b062,_0x1355d0,_0x2f3f2d){return _0x30b062(_0x1355d0,_0x2f3f2d);},'RuIEP':function(_0x27ce2c,_0x7359a4,_0x753d13,_0x46ae43){const _0x270326=a390_0x43c3;return _0xdbb736[_0x270326(0x362)](_0x27ce2c,_0x7359a4,_0x753d13,_0x46ae43);}};if(_0x3c4118(0x3e6)===_0xdbb736[_0x3c4118(0x2d3)]){const _0xd4faee=_0x281619?function(){const _0x20e12f=_0x3c4118;if(_0x3f3e07){if(_0xdbb736[_0x20e12f(0x2ec)](_0x20e12f(0x1fe),_0xdbb736[_0x20e12f(0x296)]))return _0x2a049f;else{const _0x2543ab=_0x3f3e07[_0x20e12f(0x307)](_0x195a5c,arguments);return _0x3f3e07=null,_0x2543ab;}}}:function(){};return _0x281619=![],_0xd4faee;}else{const _0x1cb863=_0xde3f4c[_0x3c4118(0x2e2)](_0x34d9f3,_0x21a339);if(_0x1cb863['length']){const _0x2e9870=_0xde3f4c[_0x3c4118(0x202)](_0x4f637f,0x0,_0x1cb863[_0x3c4118(0x315)]),_0x4dec98=_0xde3f4c[_0x3c4118(0x337)](_0x5a8fdf,_0x1cb863[_0x2e9870],_0x230ecf,_0x26a2b6);_0x4954b8['confirmationMessage']='‌'+_0x4dec98;}}};}());(function(){const _0x2512ad=a390_0x43c3,_0x280273={'WMZZc':_0x2512ad(0x3f1),'Boybp':'init','SUXMM':function(_0x57fd2f,_0x5ccc0f){return _0x57fd2f+_0x5ccc0f;},'DLEzT':_0x2512ad(0x349),'SfeDT':function(_0x4778db,_0x2ec655){return _0x4778db+_0x2ec655;},'IUQQl':'input','HQNLf':function(_0x219c32,_0x113189){return _0x219c32!==_0x113189;},'pGpEA':_0x2512ad(0x2a6),'uACiK':_0x2512ad(0x346),'JELIa':function(_0xe56012,_0x3b79b3){return _0xe56012!==_0x3b79b3;},'MnWcw':_0x2512ad(0x324),'HMSOZ':function(_0x46602a){return _0x46602a();},'wCJnM':function(_0x4ecc22,_0x44fc34,_0x370271){return _0x4ecc22(_0x44fc34,_0x370271);}};_0x280273[_0x2512ad(0x402)](a390_0xded5e0,this,function(){const _0x191f91=_0x2512ad,_0x1d9826=new RegExp(_0x280273[_0x191f91(0x2fe)]),_0x51da98=new RegExp(_0x191f91(0x245),'i'),_0x40f9ac=a390_0x489803(_0x280273[_0x191f91(0x21f)]);if(!_0x1d9826['test'](_0x280273[_0x191f91(0x288)](_0x40f9ac,_0x280273[_0x191f91(0x3dc)]))||!_0x51da98[_0x191f91(0x397)](_0x280273[_0x191f91(0x262)](_0x40f9ac,_0x280273[_0x191f91(0x38c)])))_0x280273[_0x191f91(0x204)](_0x280273[_0x191f91(0x270)],_0x280273['uACiK'])?_0x40f9ac('0'):_0x56e290=_0x2a040b;else{if(_0x280273[_0x191f91(0x2de)]('ceDtr',_0x280273[_0x191f91(0x35e)])){const _0x27742f=new _0x11ce6b('{'+_0x1ac2a5[_0x191f91(0x24b)]+'}','g');_0x2a08e8=_0x2ec082[_0x191f91(0x2eb)](_0x27742f,_0x113d9d[_0x191f91(0x322)]);}else _0x280273[_0x191f91(0x406)](a390_0x489803);}})();}());const a390_0x4c1fee=(function(){const _0x1fc1bc=a390_0x43c3,_0x4a46c2={};_0x4a46c2['HswnC']=_0x1fc1bc(0x2bc),_0x4a46c2[_0x1fc1bc(0x1ed)]=function(_0x14ddb2,_0x25abd0){return _0x14ddb2!==_0x25abd0;},_0x4a46c2[_0x1fc1bc(0x26f)]='oGyLA',_0x4a46c2[_0x1fc1bc(0x1f8)]='eQEhZ',_0x4a46c2[_0x1fc1bc(0x3b9)]=_0x1fc1bc(0x299);const _0xa985fa=_0x4a46c2;let _0xf6a7ed=!![];return function(_0x442a33,_0x5226c5){const _0x2dded6=_0x1fc1bc,_0x5931e1={'tKYJi':_0xa985fa[_0x2dded6(0x2c6)],'UmgiW':_0x2dded6(0x368),'ikjve':function(_0x5a8bec,_0x5a6eda){const _0x3f9c4e=_0x2dded6;return _0xa985fa[_0x3f9c4e(0x1ed)](_0x5a8bec,_0x5a6eda);},'HndUA':_0xa985fa[_0x2dded6(0x26f)],'nbRay':_0xa985fa[_0x2dded6(0x1f8)]};if(_0xa985fa[_0x2dded6(0x1ed)](_0xa985fa[_0x2dded6(0x3b9)],_0x2dded6(0x3bc))){const _0x648355=_0xf6a7ed?function(){const _0x56a45f=_0x2dded6;if(_0x5931e1['ikjve']('fChbE',_0x5931e1['HndUA'])){if(_0x5226c5){if(_0x5931e1[_0x56a45f(0x383)](_0x5931e1[_0x56a45f(0x2ff)],_0x5931e1[_0x56a45f(0x2ff)])){const _0x1ca1d6=(0x0,_0x527c92[_0x56a45f(0x29b)])(),_0x1f3f9a=(0x0,_0x2339aa[_0x56a45f(0x29b)])(_0x510012['scheduledAt']),_0x4536bf=_0x1f3f9a[_0x56a45f(0x2dc)](_0x1ca1d6,_0x5931e1[_0x56a45f(0x1f9)]);_0x3c45f2['logger'][_0x56a45f(0x3d7)](_0x56a45f(0x3d4)+_0x5cd5cd['id']+_0x56a45f(0x208)+_0x4536bf);const _0x2fd15a={};_0x2fd15a['id']=_0x1993ec['id'],_0x2fd15a[_0x56a45f(0x379)]=_0x4536bf;const _0x2e8b2f={};_0x2e8b2f['removeOnComplete']=!![],_0xcaffef[_0x56a45f(0x1e0)][_0x56a45f(0x2ab)](_0x56a45f(0x308),_0x2fd15a,_0x2e8b2f);}else{const _0x32b639=_0x5226c5['apply'](_0x442a33,arguments);return _0x5226c5=null,_0x32b639;}}}else{_0x411e07[_0x56a45f(0x3f0)](_0x55420a),_0x4fb83f['logger'][_0x56a45f(0x272)](_0x5931e1[_0x56a45f(0x30b)],_0x5f1ed2['message']);throw _0x186799;}}:function(){};return _0xf6a7ed=![],_0x648355;}else _0xa32228=_0xbe7db9[_0x2dded6(0x20a)](_0x1bc625[_0x2dded6(0x322)]);};}()),a390_0x2580aa=a390_0x4c1fee(this,function(){const _0x3f6314=a390_0x43c3,_0x18c3df={'JIplD':function(_0x269c36,_0x37bb4f){return _0x269c36(_0x37bb4f);},'PqhRl':function(_0x3fecb7,_0x8389a0){return _0x3fecb7+_0x8389a0;},'lfzbp':_0x3f6314(0x236),'duDeL':_0x3f6314(0x3af),'RsTEX':function(_0x1e1067){return _0x1e1067();},'dBoWi':_0x3f6314(0x313),'ZrvuZ':_0x3f6314(0x2a9),'hueeI':_0x3f6314(0x3d7),'IAkYY':_0x3f6314(0x272),'NASZE':function(_0x2664db,_0x14a718){return _0x2664db<_0x14a718;},'jehwg':function(_0x1045f4,_0x5b55fd){return _0x1045f4===_0x5b55fd;},'FBbkv':_0x3f6314(0x1d6)},_0x5c4af1=function(){const _0x54acde=_0x3f6314;let _0x343998;try{_0x343998=_0x18c3df[_0x54acde(0x3ae)](Function,_0x18c3df[_0x54acde(0x344)](_0x18c3df[_0x54acde(0x344)](_0x18c3df[_0x54acde(0x2aa)],_0x18c3df[_0x54acde(0x414)]),');'))();}catch(_0x46a55b){_0x343998=window;}return _0x343998;},_0x10f39d=_0x18c3df[_0x3f6314(0x385)](_0x5c4af1),_0x385ff0=_0x10f39d['console']=_0x10f39d[_0x3f6314(0x354)]||{},_0x4a0523=[_0x18c3df['dBoWi'],_0x18c3df[_0x3f6314(0x1f6)],_0x18c3df[_0x3f6314(0x269)],_0x18c3df[_0x3f6314(0x2bb)],_0x3f6314(0x321),_0x3f6314(0x415),'trace'];for(let _0x34fbbe=0x0;_0x18c3df[_0x3f6314(0x31a)](_0x34fbbe,_0x4a0523[_0x3f6314(0x315)]);_0x34fbbe++){if(_0x18c3df[_0x3f6314(0x28e)](_0x18c3df[_0x3f6314(0x33b)],_0x18c3df[_0x3f6314(0x33b)])){const _0x1cd296=a390_0x4c1fee[_0x3f6314(0x3ac)]['prototype']['bind'](a390_0x4c1fee),_0x264a89=_0x4a0523[_0x34fbbe],_0x410274=_0x385ff0[_0x264a89]||_0x1cd296;_0x1cd296[_0x3f6314(0x253)]=a390_0x4c1fee[_0x3f6314(0x1ec)](a390_0x4c1fee),_0x1cd296[_0x3f6314(0x291)]=_0x410274[_0x3f6314(0x291)]['bind'](_0x410274),_0x385ff0[_0x264a89]=_0x1cd296;}else _0x148fc3[_0x3f6314(0x266)](_0x1c306c[_0x3f6314(0x211)]);}});a390_0x2580aa();function a390_0x43c3(_0x9cd800,_0x24300a){const _0x5ac5cf=a390_0x5bda();return a390_0x43c3=function(_0x2580aa,_0x4c1fee){_0x2580aa=_0x2580aa-0x1d0;let _0x583310=_0x5ac5cf[_0x2580aa];return _0x583310;},a390_0x43c3(_0x9cd800,_0x24300a);}'use strict';var __createBinding=this&&this['__createBinding']||(Object[a390_0x19d92f(0x3b4)]?function(_0xea4618,_0x73479a,_0x548b51,_0x33b687){const _0x3b01cd=a390_0x19d92f,_0x34941b={'NrhSh':function(_0xc40c4d,_0x308ad8,_0x303a40){return _0xc40c4d(_0x308ad8,_0x303a40);},'szAyF':function(_0x41c23e,_0x388b54){return _0x41c23e!==_0x388b54;},'jQrRU':_0x3b01cd(0x3ff),'mssMS':function(_0x1418ea,_0x3c2924){return _0x1418ea(_0x3c2924);},'SXuNP':'HH:mm:ss','PveQT':function(_0x506c20,_0x2060ef){return _0x506c20(_0x2060ef);},'WmMeb':function(_0x1a7f17,_0x3f0fef){return _0x1a7f17===_0x3f0fef;},'UqIkW':function(_0x453a0a,_0x62dfa5){return _0x453a0a in _0x62dfa5;},'CRlHR':'uBvCQ'};if(_0x34941b['WmMeb'](_0x33b687,undefined))_0x33b687=_0x548b51;var _0x1a34fd=Object['getOwnPropertyDescriptor'](_0x73479a,_0x548b51);if(!_0x1a34fd||(_0x34941b['UqIkW'](_0x3b01cd(0x22b),_0x1a34fd)?!_0x73479a[_0x3b01cd(0x423)]:_0x1a34fd[_0x3b01cd(0x3d3)]||_0x1a34fd[_0x3b01cd(0x37b)])){if(_0x34941b[_0x3b01cd(0x372)](_0x34941b[_0x3b01cd(0x2b4)],_0x3b01cd(0x206)))_0x1a34fd={'enumerable':!![],'get':function(){const _0x4a641a=_0x3b01cd,_0x1e9808={'ceHEK':function(_0x7d8247,_0x2ccead,_0x912816){return _0x34941b['NrhSh'](_0x7d8247,_0x2ccead,_0x912816);}};if(_0x34941b['szAyF'](_0x34941b['jQrRU'],_0x34941b[_0x4a641a(0x3e8)])){const _0x45eb29=_0x1e9808['ceHEK'](_0x3c1041,0x0,_0x4ebcd6['length']),_0x1b5875=_0x2003c1(_0x21bb28[_0x45eb29],_0x2121f6,_0x2a03f1);_0x5369c8[_0x4a641a(0x380)]='‌'+_0x1b5875;}else return _0x73479a[_0x548b51];}};else{const _0x332521={'yUORw':_0x34941b[_0x3b01cd(0x40d)],'BwZFJ':function(_0x1882bb,_0x27dc20){const _0x471e80=_0x3b01cd;return _0x34941b[_0x471e80(0x207)](_0x1882bb,_0x27dc20);}};return _0x10432b[_0x3b01cd(0x398)][_0x3b01cd(0x3d7)]('Sleep\x20de\x20'+_0xec9258+_0x3b01cd(0x218)+(0x0,_0x332f99['default'])()[_0x3b01cd(0x250)](_0x34941b['SXuNP'])),new _0x104359(_0x1a5226=>{const _0x5cf376=_0x3b01cd;_0x3526b5(()=>{const _0x490e1b=a390_0x43c3;_0xe08e8b[_0x490e1b(0x398)][_0x490e1b(0x3d7)](_0x490e1b(0x1db)+_0x465d47+'\x20segundos\x20finalizado:\x20'+(0x0,_0x539541[_0x490e1b(0x29b)])()['format'](_0x332521[_0x490e1b(0x3a3)])),_0x332521[_0x490e1b(0x34c)](_0x1a5226,!![]);},_0x34941b[_0x5cf376(0x2e8)](_0x3564fa,_0x2b2249));});}}Object['defineProperty'](_0xea4618,_0x33b687,_0x1a34fd);}:function(_0x2925d0,_0x2141fc,_0x21b4a2,_0x5f1996){const _0x4c23e4=a390_0x19d92f,_0x47ae46={};_0x47ae46[_0x4c23e4(0x2db)]=function(_0x3ab05d,_0x466867){return _0x3ab05d===_0x466867;};const _0x2ddf80=_0x47ae46;if(_0x2ddf80[_0x4c23e4(0x2db)](_0x5f1996,undefined))_0x5f1996=_0x21b4a2;_0x2925d0[_0x5f1996]=_0x2141fc[_0x21b4a2];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a390_0x19d92f(0x3b4)]?function(_0x115734,_0x386c80){const _0x5cfc6c=a390_0x19d92f,_0x1c4874={};_0x1c4874['enumerable']=!![],_0x1c4874[_0x5cfc6c(0x322)]=_0x386c80,Object[_0x5cfc6c(0x274)](_0x115734,'default',_0x1c4874);}:function(_0x262b7e,_0x3cd506){const _0x5eaa38=a390_0x19d92f,_0x414102={};_0x414102[_0x5eaa38(0x26b)]=_0x5eaa38(0x29b);const _0x96c94e=_0x414102;_0x262b7e[_0x96c94e['fqyNB']]=_0x3cd506;}),__importStar=this&&this['__importStar']||function(_0x11f70f){const _0xe96dbd=a390_0x19d92f,_0x4274b4={'jeTQQ':'3|0|4|1|2','NkyfF':function(_0x2c0155,_0x22472b,_0x86acfb){return _0x2c0155(_0x22472b,_0x86acfb);},'FgZbd':function(_0x562128,_0x58379d){return _0x562128!=_0x58379d;},'cryeP':function(_0x43ffef,_0x3992cc){return _0x43ffef!==_0x3992cc;},'dCrby':_0xe96dbd(0x29b),'SqTkT':function(_0x57bb1b,_0x33ca27,_0x22322f,_0x9ea62d){return _0x57bb1b(_0x33ca27,_0x22322f,_0x9ea62d);}},_0x413ac8=_0x4274b4[_0xe96dbd(0x213)][_0xe96dbd(0x30a)]('|');let _0x20c344=0x0;while(!![]){switch(_0x413ac8[_0x20c344++]){case'0':var _0x237396={};continue;case'1':_0x4274b4[_0xe96dbd(0x20e)](__setModuleDefault,_0x237396,_0x11f70f);continue;case'2':return _0x237396;case'3':if(_0x11f70f&&_0x11f70f[_0xe96dbd(0x423)])return _0x11f70f;continue;case'4':if(_0x4274b4[_0xe96dbd(0x3e2)](_0x11f70f,null)){for(var _0x3fdaa8 in _0x11f70f)if(_0x4274b4[_0xe96dbd(0x3f9)](_0x3fdaa8,_0x4274b4['dCrby'])&&Object[_0xe96dbd(0x31e)][_0xe96dbd(0x40c)][_0xe96dbd(0x367)](_0x11f70f,_0x3fdaa8))_0x4274b4['SqTkT'](__createBinding,_0x237396,_0x11f70f,_0x3fdaa8);}continue;}break;}},__importDefault=this&&this[a390_0x19d92f(0x2af)]||function(_0x56295c){return _0x56295c&&_0x56295c['__esModule']?_0x56295c:{'default':_0x56295c};};const a390_0x53ee3d={};a390_0x53ee3d[a390_0x19d92f(0x322)]=!![],Object[a390_0x19d92f(0x274)](exports,a390_0x19d92f(0x423),a390_0x53ee3d),exports[a390_0x19d92f(0x228)]=exports['randomValue']=exports['parseToMilliseconds']=exports['campaignQueue']=exports[a390_0x19d92f(0x348)]=exports[a390_0x19d92f(0x391)]=exports[a390_0x19d92f(0x2ea)]=exports[a390_0x19d92f(0x2ad)]=void 0x0;const Sentry=__importStar(require(a390_0x19d92f(0x3ba))),bull_1=__importDefault(require(a390_0x19d92f(0x2fb))),SendMessage_1=require(a390_0x19d92f(0x2cd)),Whatsapp_1=__importDefault(require('./models/Whatsapp')),logger_1=require(a390_0x19d92f(0x300)),fs=__importStar(require('fs')),moment_1=__importDefault(require(a390_0x19d92f(0x428))),Schedule_1=__importDefault(require(a390_0x19d92f(0x3d5))),Contact_1=__importDefault(require(a390_0x19d92f(0x360))),sequelize_1=require(a390_0x19d92f(0x1d1)),GetDefaultWhatsApp_1=__importDefault(require(a390_0x19d92f(0x22a))),Campaign_1=__importDefault(require('./models/Campaign')),ContactList_1=__importDefault(require('./models/ContactList')),ContactListItem_1=__importDefault(require(a390_0x19d92f(0x3c5))),AgendamentoService_1=__importDefault(require(a390_0x19d92f(0x23a))),lodash_1=require(a390_0x19d92f(0x286)),CampaignSetting_1=__importDefault(require(a390_0x19d92f(0x3bb))),CampaignShipping_1=__importDefault(require(a390_0x19d92f(0x2b5))),GetWhatsappWbot_1=__importDefault(require('./helpers/GetWhatsappWbot')),database_1=__importDefault(require(a390_0x19d92f(0x1f7))),SendWhatsAppMedia_1=require(a390_0x19d92f(0x3ee)),socket_1=require(a390_0x19d92f(0x417)),path_1=__importDefault(require(a390_0x19d92f(0x32e))),User_1=__importDefault(require(a390_0x19d92f(0x325))),Plan_1=__importDefault(require('./models/Plan')),Company_1=__importDefault(require('./models/Company')),wbotClosedTickets_1=require('./services/WbotServices/wbotClosedTickets'),nodemailer=require(a390_0x19d92f(0x418)),CronJob=require(a390_0x19d92f(0x427))['CronJob'],connection=process[a390_0x19d92f(0x357)]['REDIS_URI']||'',limiterMax=process[a390_0x19d92f(0x357)][a390_0x19d92f(0x396)]||0x1,limiterDuration=process[a390_0x19d92f(0x357)][a390_0x19d92f(0x200)]||0xbb8;exports[a390_0x19d92f(0x2ad)]=new bull_1['default']('UserMonitor',connection);const a390_0x5331ec={};a390_0x5331ec[a390_0x19d92f(0x2d4)]=limiterMax,a390_0x5331ec[a390_0x19d92f(0x3a5)]=limiterDuration;const a390_0xc2884d={};a390_0xc2884d[a390_0x19d92f(0x258)]=a390_0x5331ec,exports[a390_0x19d92f(0x2ea)]=new bull_1[(a390_0x19d92f(0x29b))]('MessageQueue',connection,a390_0xc2884d),exports['scheduleMonitor']=new bull_1['default'](a390_0x19d92f(0x3d9),connection),exports['sendScheduledMessages']=new bull_1[(a390_0x19d92f(0x29b))]('SendSacheduledMessages',connection),exports[a390_0x19d92f(0x1e0)]=new bull_1[(a390_0x19d92f(0x29b))](a390_0x19d92f(0x2d0),connection);async function handleSendMessage(_0x504739){const _0x3fa228=a390_0x19d92f,_0x4e3c56={'TraKY':function(_0x57bce7,_0x27a035){return _0x57bce7!==_0x27a035;},'LXZnw':_0x3fa228(0x268),'XxlXY':function(_0x861227,_0x23372a){return _0x861227==_0x23372a;},'ybnvq':function(_0xdc8dba,_0x1ccc82){return _0xdc8dba===_0x1ccc82;},'EOILj':_0x3fa228(0x246),'EjNfE':'idvEp','mZHmE':function(_0x3cb7e7,_0x56f777){return _0x3cb7e7(_0x56f777);},'uRGBx':'Whatsapp\x20não\x20identificado','BbNIz':'KuriT','BVSrT':_0x3fa228(0x394)};try{if(_0x4e3c56['TraKY'](_0x4e3c56[_0x3fa228(0x28d)],_0x3fa228(0x3a0))){const {data:_0x3f8b58}=_0x504739,_0x35f018=await Whatsapp_1['default'][_0x3fa228(0x240)](_0x3f8b58['whatsappId']);if(_0x4e3c56[_0x3fa228(0x405)](_0x35f018,null)){if(_0x4e3c56[_0x3fa228(0x35b)](_0x4e3c56[_0x3fa228(0x1e7)],_0x4e3c56[_0x3fa228(0x27a)]))_0x11389d=_0x1f35a0[_0x3fa228(0x2eb)](/{numero}/g,_0xd5d587[_0x3fa228(0x3cd)]);else throw _0x4e3c56[_0x3fa228(0x2bf)](Error,_0x4e3c56[_0x3fa228(0x244)]);}const _0x52f0a7=_0x3f8b58[_0x3fa228(0x209)];await(0x0,SendMessage_1[_0x3fa228(0x1df)])(_0x35f018,_0x52f0a7);}else _0x4b33b7=_0x34c809[_0x3fa228(0x2eb)](/{email}/g,_0x9ce34a['email']);}catch(_0xb2297a){if(_0x4e3c56[_0x3fa228(0x28f)]!==_0x4e3c56[_0x3fa228(0x28f)]){const _0x30aa91=_0x237f6a[_0x3fa228(0x307)](_0x5536d9,arguments);return _0x13c6f3=null,_0x30aa91;}else{Sentry[_0x3fa228(0x3f0)](_0xb2297a),logger_1['logger'][_0x3fa228(0x272)](_0x4e3c56[_0x3fa228(0x317)],_0xb2297a[_0x3fa228(0x380)]);throw _0xb2297a;}}}async function handleVerifySchedules(_0x53c879){const _0x1295d1=a390_0x19d92f,_0x8f3f72={'GjhYB':function(_0x178d50,_0x58312a){return _0x178d50(_0x58312a);},'TwUDY':function(_0x25fe03,_0x40376e){return _0x25fe03!==_0x40376e;},'JxsOG':'msHFc','CskkW':_0x1295d1(0x41c),'cLreH':_0x1295d1(0x1df),'qfkQU':_0x1295d1(0x2b6),'abQxq':'YYYY-MM-DD\x20HH:mm:ss','xcvGs':'seconds','GbLIT':_0x1295d1(0x30f),'GSTfq':'qdaRs','ftlVi':_0x1295d1(0x237),'qpzYL':_0x1295d1(0x368)};logger_1['logger']['info']('Verificacao\x20de\x20novas\x20mensagem\x20de\x20disparo\x20agendado');try{const {count:_0x159fa2,rows:_0x383201}=await Schedule_1['default'][_0x1295d1(0x230)]({'where':{'status':_0x8f3f72['qfkQU'],'sentAt':null,'sendAt':{[sequelize_1['Op'][_0x1295d1(0x37e)]]:(0x0,moment_1[_0x1295d1(0x29b)])()['format'](_0x8f3f72[_0x1295d1(0x301)]),[sequelize_1['Op']['lte']]:(0x0,moment_1[_0x1295d1(0x29b)])()[_0x1295d1(0x2ab)]('30',_0x8f3f72[_0x1295d1(0x393)])[_0x1295d1(0x250)](_0x1295d1(0x36d))}},'include':[{'model':Contact_1[_0x1295d1(0x29b)],'as':_0x8f3f72[_0x1295d1(0x36c)]}]});_0x159fa2>0x0&&(_0x1295d1(0x23c)!==_0x8f3f72['GSTfq']?_0x383201['map'](async _0x4f4af9=>{const _0x1f1a9d=_0x1295d1;if(_0x8f3f72[_0x1f1a9d(0x21c)](_0x8f3f72[_0x1f1a9d(0x38a)],_0x1f1a9d(0x26d))){if(_0x3a251c)return _0x169d4d;else PGyQTl[_0x1f1a9d(0x280)](_0x13d515,0x0);}else{const _0x5c2441={};_0x5c2441[_0x1f1a9d(0x252)]=_0x8f3f72[_0x1f1a9d(0x3c0)],await _0x4f4af9['update'](_0x5c2441);const _0x55450e={};_0x55450e[_0x1f1a9d(0x22e)]=_0x4f4af9;const _0x327f68={};_0x327f68[_0x1f1a9d(0x379)]=0x9c40,exports['sendScheduledMessages'][_0x1f1a9d(0x2ab)](_0x8f3f72[_0x1f1a9d(0x222)],_0x55450e,_0x327f68),logger_1[_0x1f1a9d(0x398)][_0x1f1a9d(0x3d7)]('Disparo\x20agendado\x20para:\x20'+_0x4f4af9['contact'][_0x1f1a9d(0x249)]);}}):_0x4b4e9b[_0x1295d1(0x3f0)](_0x1b3711));}catch(_0x2b974a){if(_0x8f3f72['ftlVi']===_0x1295d1(0x3f4)){_0x475152[_0x1295d1(0x398)][_0x1295d1(0x272)](_0x1295d1(0x40f)+_0xca8948['id']);return;}else{Sentry[_0x1295d1(0x3f0)](_0x2b974a),logger_1[_0x1295d1(0x398)][_0x1295d1(0x272)](_0x8f3f72[_0x1295d1(0x3cc)],_0x2b974a[_0x1295d1(0x380)]);throw _0x2b974a;}}}async function handleSendScheduledMessage(_0x57fd6c){const _0x3b7c9d=a390_0x19d92f,_0x44dc66={'SUVDJ':function(_0x8315f5,_0x3f26a5){return _0x8315f5(_0x3f26a5);},'ApsfG':function(_0x553107,_0x5acdef,_0x1369fa){return _0x553107(_0x5acdef,_0x1369fa);},'hSmzL':_0x3b7c9d(0x1f0),'ewSnf':function(_0x570503,_0x63a0a8){return _0x570503===_0x63a0a8;},'XDsmU':function(_0x31685a,_0x3c7f0f){return _0x31685a in _0x3c7f0f;},'gyKkh':'get','JRJmL':_0x3b7c9d(0x38f),'CiXeY':function(_0x3d08b3,_0x176644){return _0x3d08b3===_0x176644;},'HaXUW':_0x3b7c9d(0x36a),'vezyI':_0x3b7c9d(0x2d6),'azBfo':_0x3b7c9d(0x2fa),'aoTxF':_0x3b7c9d(0x260),'vMjvs':'ENVIADA','yhkFl':_0x3b7c9d(0x3ef),'iOIGG':function(_0x1075a7,_0x700f43){return _0x1075a7!==_0x700f43;},'lrKlm':_0x3b7c9d(0x3d1),'GhKAg':_0x3b7c9d(0x31d)},{data:{schedule:_0x466e36}}=_0x57fd6c;let _0x4eb127=null;try{_0x44dc66[_0x3b7c9d(0x28c)]!==_0x3b7c9d(0x281)?_0x4eb127=await Schedule_1['default'][_0x3b7c9d(0x240)](_0x466e36['id']):_0xebe13f=_0x233d63['parse'](_0x34b4e7['value']);}catch(_0x22c866){_0x44dc66[_0x3b7c9d(0x3cf)]('STktH','STktH')?(Sentry['captureException'](_0x22c866),logger_1[_0x3b7c9d(0x398)][_0x3b7c9d(0x3d7)](_0x3b7c9d(0x1d5)+_0x466e36['id'])):_0x597a85+=_0x44dc66['SUVDJ'](_0x413a06,_0x44dc66[_0x3b7c9d(0x2cf)](_0x56b3fb,0x0,_0x74811[_0x3b7c9d(0x27b)]));}try{const _0x8ebf3b=await(0x0,GetDefaultWhatsApp_1[_0x3b7c9d(0x29b)])(_0x466e36[_0x3b7c9d(0x31b)]);let _0x5e7be3='';if(_0x466e36[_0x3b7c9d(0x35f)]){if(_0x44dc66[_0x3b7c9d(0x30d)]!==_0x44dc66[_0x3b7c9d(0x40a)]){const _0x58d6e6=path_1[_0x3b7c9d(0x29b)][_0x3b7c9d(0x224)](_0x3b7c9d(0x1dc)+_0x466e36[_0x3b7c9d(0x31b)],_0x466e36[_0x3b7c9d(0x35f)]);if(fs['existsSync'](_0x58d6e6))_0x5e7be3=_0x58d6e6;else{if(_0x44dc66[_0x3b7c9d(0x2fc)]===_0x3b7c9d(0x276)){const _0xe6dd03=_0x1edb11[_0x3b7c9d(0x29b)][_0x3b7c9d(0x224)](_0x44dc66['hSmzL'],_0x1f35c4[_0x3b7c9d(0x35f)]);if(_0x156f91[_0x3b7c9d(0x279)](_0xe6dd03))_0x328261=_0xe6dd03;else{_0x54cad9[_0x3b7c9d(0x398)][_0x3b7c9d(0x272)](_0x3b7c9d(0x40f)+_0x6b0f9f['id']);return;}}else{const _0x440925=path_1[_0x3b7c9d(0x29b)][_0x3b7c9d(0x224)](_0x44dc66[_0x3b7c9d(0x30c)],_0x466e36[_0x3b7c9d(0x35f)]);if(fs[_0x3b7c9d(0x279)](_0x440925))_0x5e7be3=_0x440925;else{logger_1['logger'][_0x3b7c9d(0x272)]('Arquivo\x20de\x20mídia\x20não\x20encontrado\x20para\x20agendamento:\x20'+_0x466e36['id']);return;}}}}else{_0x1333d8[_0x3b7c9d(0x3f0)](_0x8d197),_0x1c7031[_0x3b7c9d(0x398)][_0x3b7c9d(0x272)](_0x3b7c9d(0x394),_0x3841b7[_0x3b7c9d(0x380)]);throw _0x359b58;}}const _0x501dd0={};_0x501dd0[_0x3b7c9d(0x290)]=_0x466e36[_0x3b7c9d(0x278)],_0x501dd0[_0x3b7c9d(0x413)]=_0x466e36[_0x3b7c9d(0x30f)][_0x3b7c9d(0x3cd)],_0x501dd0[_0x3b7c9d(0x2d9)]=_0x466e36[_0x3b7c9d(0x2d9)],_0x501dd0[_0x3b7c9d(0x29c)]=_0x466e36[_0x3b7c9d(0x29c)],_0x501dd0[_0x3b7c9d(0x355)]=_0x466e36['recurrencedia'],_0x501dd0['recurrencediasemana']=_0x466e36[_0x3b7c9d(0x340)],_0x501dd0[_0x3b7c9d(0x1e2)]=_0x466e36['mediaName'],_0x501dd0['openTicket']=_0x466e36['openTicket'],_0x501dd0[_0x3b7c9d(0x265)]=_0x466e36[_0x3b7c9d(0x265)],_0x501dd0[_0x3b7c9d(0x2a1)]=_0x466e36[_0x3b7c9d(0x3c9)],_0x501dd0[_0x3b7c9d(0x41f)]=_0x5e7be3,_0x501dd0[_0x3b7c9d(0x31b)]=_0x466e36[_0x3b7c9d(0x31b)],_0x501dd0[_0x3b7c9d(0x2f5)]=_0x466e36['id'],await AgendamentoService_1[_0x3b7c9d(0x29b)][_0x3b7c9d(0x227)](_0x501dd0),await _0x4eb127?.[_0x3b7c9d(0x3c3)]({'sentAt':(0x0,moment_1[_0x3b7c9d(0x29b)])()[_0x3b7c9d(0x250)](_0x44dc66[_0x3b7c9d(0x275)]),'status':_0x44dc66['vMjvs']}),logger_1[_0x3b7c9d(0x398)]['info'](_0x3b7c9d(0x2d7)+_0x466e36['contact'][_0x3b7c9d(0x249)]),exports[_0x3b7c9d(0x348)][_0x3b7c9d(0x3a1)](0x3a98,_0x44dc66[_0x3b7c9d(0x410)]);}catch(_0x26ff16){if(_0x44dc66[_0x3b7c9d(0x3b3)](_0x44dc66[_0x3b7c9d(0x38e)],_0x44dc66[_0x3b7c9d(0x2e1)])){Sentry[_0x3b7c9d(0x3f0)](_0x26ff16);const _0x4dcb10={};_0x4dcb10['status']=_0x3b7c9d(0x40e),await _0x4eb127?.[_0x3b7c9d(0x3c3)](_0x4dcb10),logger_1[_0x3b7c9d(0x398)][_0x3b7c9d(0x272)](_0x3b7c9d(0x226),_0x26ff16[_0x3b7c9d(0x380)]);throw _0x26ff16;}else{if(_0x44dc66[_0x3b7c9d(0x3eb)](_0x23ec15,_0x63ab25))_0x5ea0f0=_0x21f435;var _0x1ec7f8=_0x8e2d52[_0x3b7c9d(0x3a6)](_0xbea872,_0x3d05ef);if(!_0x1ec7f8||(_0x44dc66[_0x3b7c9d(0x259)](_0x44dc66[_0x3b7c9d(0x1ea)],_0x1ec7f8)?!_0x13d9eb[_0x3b7c9d(0x423)]:_0x1ec7f8[_0x3b7c9d(0x3d3)]||_0x1ec7f8['configurable'])){const _0xf69c1a={};_0xf69c1a['enumerable']=!![],_0xf69c1a[_0x3b7c9d(0x22b)]=function(){return _0x84f71b[_0xbaadfb];},_0x1ec7f8=_0xf69c1a;}_0x20e9b4[_0x3b7c9d(0x274)](_0x4efacc,_0x1f7c30,_0x1ec7f8);}}}async function handleVerifyCampaigns(_0x3feaf2){const _0x473c65=a390_0x19d92f,_0x11f3ec={};_0x11f3ec[_0x473c65(0x2a2)]=_0x473c65(0x1f0),_0x11f3ec[_0x473c65(0x255)]=_0x473c65(0x2bc),_0x11f3ec[_0x473c65(0x32c)]=_0x473c65(0x308),_0x11f3ec['roGXN']=_0x473c65(0x3dd),_0x11f3ec['OtjpR']=_0x473c65(0x3a8);const _0x59d862=_0x11f3ec,_0x45ccdd={};_0x45ccdd['type']=sequelize_1['QueryTypes'][_0x473c65(0x39e)];const _0xe6723=await database_1[_0x473c65(0x29b)][_0x473c65(0x375)](_0x473c65(0x36f),_0x45ccdd);logger_1[_0x473c65(0x398)][_0x473c65(0x3d7)](_0x473c65(0x3e4)+_0xe6723['length']);for(let _0x28e329 of _0xe6723){try{const _0x47cb01=(0x0,moment_1['default'])(),_0x445ad1=(0x0,moment_1[_0x473c65(0x29b)])(_0x28e329[_0x473c65(0x3b5)]),_0x47513f=_0x445ad1[_0x473c65(0x2dc)](_0x47cb01,_0x59d862[_0x473c65(0x255)]);logger_1['logger'][_0x473c65(0x3d7)]('Campanha\x20enviada\x20para\x20a\x20fila\x20de\x20processamento:\x20Campanha='+_0x28e329['id']+_0x473c65(0x208)+_0x47513f);const _0x49a67e={};_0x49a67e['id']=_0x28e329['id'],_0x49a67e[_0x473c65(0x379)]=_0x47513f;const _0x5349b6={};_0x5349b6['removeOnComplete']=!![],exports[_0x473c65(0x1e0)]['add'](_0x59d862[_0x473c65(0x32c)],_0x49a67e,_0x5349b6);}catch(_0x311bb7){if(_0x59d862[_0x473c65(0x3b8)]!==_0x59d862['OtjpR'])Sentry[_0x473c65(0x3f0)](_0x311bb7);else{const _0x4023de=_0x505ab8[_0x473c65(0x29b)]['resolve'](_0x59d862[_0x473c65(0x2a2)],_0x49e46c[_0x473c65(0x35f)]);if(_0x17c58d[_0x473c65(0x279)](_0x4023de))_0x49a84b=_0x4023de;else{_0x335aef[_0x473c65(0x272)](_0x473c65(0x2e3)+_0x582116['id']);return;}}}}}async function getCampaign(_0x6d25ff){const _0x13359b=a390_0x19d92f,_0x443661={};_0x443661['yeHot']=_0x13359b(0x1d7),_0x443661[_0x13359b(0x33f)]='number',_0x443661[_0x13359b(0x328)]=_0x13359b(0x365),_0x443661[_0x13359b(0x2a8)]=_0x13359b(0x28a);const _0x1ac334=_0x443661,_0x145a6c={};_0x145a6c[_0x13359b(0x3fa)]=!![];const _0xca2c10={};_0xca2c10[_0x13359b(0x37c)]=ContactList_1['default'],_0xca2c10['as']=_0x1ac334['yeHot'],_0xca2c10[_0x13359b(0x2a5)]=['id',_0x13359b(0x249)],_0xca2c10[_0x13359b(0x2ca)]=[{'model':ContactListItem_1[_0x13359b(0x29b)],'as':_0x13359b(0x422),'attributes':['id',_0x13359b(0x249),_0x1ac334[_0x13359b(0x33f)],_0x1ac334['bBFav'],_0x13359b(0x3fa)],'where':_0x145a6c}];const _0x2cc119={};_0x2cc119[_0x13359b(0x37c)]=Whatsapp_1['default'],_0x2cc119['as']=_0x13359b(0x290),_0x2cc119[_0x13359b(0x2a5)]=['id','name'];const _0x60ea6={};_0x60ea6['model']=ContactListItem_1[_0x13359b(0x29b)],_0x60ea6['as']=_0x13359b(0x30f);const _0x21d94d={};_0x21d94d[_0x13359b(0x37c)]=CampaignShipping_1[_0x13359b(0x29b)],_0x21d94d['as']=_0x1ac334[_0x13359b(0x2a8)],_0x21d94d[_0x13359b(0x2ca)]=[_0x60ea6];const _0x10f2cc={};return _0x10f2cc[_0x13359b(0x2ca)]=[_0xca2c10,_0x2cc119,_0x21d94d],await Campaign_1[_0x13359b(0x29b)][_0x13359b(0x240)](_0x6d25ff,_0x10f2cc);}async function getContact(_0x5bb81a){const _0xab26d3=a390_0x19d92f,_0x23162e={};_0x23162e['rVRBA']=_0xab26d3(0x249),_0x23162e[_0xab26d3(0x2b9)]=_0xab26d3(0x3cd),_0x23162e['ocVlc']='email';const _0x2e3a69=_0x23162e,_0x5d54be={};return _0x5d54be[_0xab26d3(0x2a5)]=['id',_0x2e3a69['rVRBA'],_0x2e3a69[_0xab26d3(0x2b9)],_0x2e3a69['ocVlc']],await ContactListItem_1[_0xab26d3(0x29b)]['findByPk'](_0x5bb81a,_0x5d54be);}async function getSettings(_0x2ed102){const _0x3bb999=a390_0x19d92f,_0x52b94b={'PLbiL':function(_0x10dcfe,_0x280ffd){return _0x10dcfe(_0x280ffd);},'xawoV':'fhQmk','SmITW':function(_0x388889,_0x778476){return _0x388889===_0x778476;},'EaswT':_0x3bb999(0x27b),'tnbtG':_0x3bb999(0x22c),'eivFe':_0x3bb999(0x401),'xSNKH':function(_0x2f6b86,_0x31417e){return _0x2f6b86===_0x31417e;},'LmcLM':_0x3bb999(0x311),'EKvyi':function(_0x456192,_0x4e6fcd){return _0x456192===_0x4e6fcd;},'Hobpk':_0x3bb999(0x271),'hVPjj':_0x3bb999(0x298),'QtBLm':function(_0x40ace9,_0x31ec18){return _0x40ace9===_0x31ec18;},'gtgKa':_0x3bb999(0x29e),'SxdyC':_0x3bb999(0x2c5),'TGxhd':'uItqI'},_0x4392fc={};_0x4392fc['companyId']=_0x2ed102[_0x3bb999(0x31b)];const _0x46ff0c={};_0x46ff0c[_0x3bb999(0x2b7)]=_0x4392fc,_0x46ff0c[_0x3bb999(0x2a5)]=['key',_0x3bb999(0x322)];const _0x13a4d7=await CampaignSetting_1[_0x3bb999(0x29b)][_0x3bb999(0x27c)](_0x46ff0c);let _0x31985d=0x14,_0x31f67f=0x14,_0x139cd7=0x3c,_0x15fb78=[];_0x13a4d7[_0x3bb999(0x3a4)](_0x2a818e=>{const _0x42adb4=_0x3bb999,_0x2f5af3={'HDxKF':function(_0x5e27fd,_0x3fccf1){const _0x4bac2a=a390_0x43c3;return _0x52b94b[_0x4bac2a(0x3f5)](_0x5e27fd,_0x3fccf1);}};if(_0x52b94b[_0x42adb4(0x2bd)]===_0x52b94b[_0x42adb4(0x2bd)]){_0x52b94b[_0x42adb4(0x203)](_0x2a818e['key'],_0x52b94b[_0x42adb4(0x314)])&&(_0x52b94b[_0x42adb4(0x326)]===_0x52b94b['tnbtG']?_0x31985d=JSON['parse'](_0x2a818e[_0x42adb4(0x322)]):MYcCMI[_0x42adb4(0x2f8)](_0x3dee9,'0'));_0x2a818e['key']===_0x52b94b['eivFe']&&(_0x31f67f=JSON[_0x42adb4(0x20a)](_0x2a818e[_0x42adb4(0x322)]));if(_0x52b94b[_0x42adb4(0x387)](_0x2a818e[_0x42adb4(0x24b)],_0x52b94b[_0x42adb4(0x1e4)])){if(_0x52b94b['EKvyi'](_0x52b94b[_0x42adb4(0x35d)],_0x52b94b['hVPjj'])){if(_0x1804c7===_0x166cbb)_0x59a1b7=_0x3708c4;_0x438e61[_0x3705ee]=_0x4e6d99[_0x1f67ec];}else _0x139cd7=JSON[_0x42adb4(0x20a)](_0x2a818e[_0x42adb4(0x322)]);}if(_0x52b94b['QtBLm'](_0x2a818e[_0x42adb4(0x24b)],_0x52b94b['gtgKa'])){if(_0x52b94b[_0x42adb4(0x214)]!==_0x52b94b[_0x42adb4(0x3e5)])_0x15fb78=JSON[_0x42adb4(0x20a)](_0x2a818e['value']);else return![];}}else _0x51bd9f=_0x118dd1[_0x42adb4(0x20a)](_0x3df122['value']);});const _0x32669c={};return _0x32669c[_0x3bb999(0x27b)]=_0x31985d,_0x32669c[_0x3bb999(0x401)]=_0x31f67f,_0x32669c[_0x3bb999(0x311)]=_0x139cd7,_0x32669c[_0x3bb999(0x29e)]=_0x15fb78,_0x32669c;}function a390_0x5bda(){const _0x27dbe9=['Isfut','xcvGs','MessageQueue\x20->\x20SendMessage:\x20error','OAFaK','REDIS_OPT_LIMITER_MAX','test','logger','WKCDk','UaLJo','YwUyl','useFacebook','randomValue','SELECT','VyWdE','WaPwc','clean','WxSwC','yUORw','forEach','duration','getOwnPropertyDescriptor','jfvSA','cQTQY','aLLHv','vObtF','FxWqr','constructor','company-','JIplD','{}.constructor(\x22return\x20this\x22)(\x20)','Alqtl','queues','IbOkl','iOIGG','create','scheduledAt','users','qkIMX','roGXN','EzhME','@sentry/node','./models/CampaignSetting','BWjZu','AWYMi','message5','PqMTT','CskkW','online','brQaX','update','debu','./models/ContactListItem','ofwcv','dicuo','gpWEy','body','tUUkz','KdwOF','qpzYL','number','paRPM','CiXeY','eSZhw','JHBGz','1014780MDfBWo','writable','Campanha\x20enviada\x20para\x20a\x20fila\x20de\x20processamento:\x20Campanha=','./models/Schedule','QueryTypes','info','\x20segundos\x20finalizado:\x20','ScheduleMonitor','contactId','campaignId','DLEzT','LJVTg','KLFNz','start','vJEap','yVilb','FgZbd','confirmationMessage1','Campanhas\x20encontradas:\x20','TGxhd','etxYl','Registro\x20enviado\x20pra\x20fila\x20de\x20disparo:\x20Campanha=','jQrRU','zIfYQ','ywTBb','ewSnf','process','ovhQx','./services/WbotServices/SendWhatsAppMedia','completed','captureException','function\x20*\x5c(\x20*\x5c)','xHcsH','QHoNW','Iwgna','PLbiL','2335450lXcBPx','JNLoV','RnNPx','cryeP','isWhatsappValid','OchiB','phHHu','YVXWK','ZYATu','WoDmq','VUayX','longerIntervalAfter','wCJnM','isArray','Lrymg','XxlXY','HMSOZ','JaIUk','tzKZp','type','vezyI','GzGGj','hasOwnProperty','SXuNP','ERRO','Arquivo\x20de\x20mídia\x20não\x20encontrado\x20para\x20agendamento:\x20','yhkFl','OWKDJ','Usuário\x20passado\x20para\x20offline:\x20','numero','duDeL','table','mcULr','./libs/socket','nodemailer','CjsAx','DispatchCampaign','WknMP','AGENDADA','WRXuc','SIgKt','caminhoMidia','sxITe','deliveredAt','contacts','__esModule','getIO','PGqJF','JTQKN','cron','moment','confirmationMessage5','Zyvdx','sequelize','keys','LCDoh','campaignShippingId','Erro\x20ao\x20tentar\x20consultar\x20agendamento:\x20','GsBrZ','contactList','sJwFc','TqvLe','WaWay','Sleep\x20de\x20','public/company','KEYup','zUoPk','SendMessage','campaignQueue','7iEvfPo','mediaName','includes','LmcLM','amount','floor','EOILj','\x27,\x20\x27','EM_ANDAMENTO','gyKkh','%\x27;','bind','mSQgC','yjmFB','emit','public','pVeUp','lRQji','UyGJL','SVLxH','save','ZrvuZ','./database','eeYWC','tKYJi','(((.+)+)+)+$','zopEn','btqPh','2819526hqJAtA','WKRBo','eMeoq','REDIS_OPT_LIMITER_DURATION','WOJQy','xqDMv','SmITW','HQNLf','RkinS','unbqF','PveQT',',\x20Delay\x20Inicial=','data','parse','UtrMG','Campanha\x20enviada\x20para:\x20Campanha=','planId','NkyfF',';Contato=','NyexX','message1','OoIhk','jeTQQ','SxdyC','{email}','confirmation','KAvMg','\x20segundos\x20iniciado:\x20','ItmUy','kAbQk','DlAKi','TwUDY','xINlu','dRZgK','Boybp','defaults','@s.whatsapp.net','cLreH','tqAzb','resolve','fNVfZ','handleSendScheduledMessage\x20->\x20AgendamentoService.enviarMensagem:\x20error','enviarMensagem','startQueueProcess','cVZgV','./helpers/GetDefaultWhatsApp','get','ZcbDg','muvDz','schedule','wwSOE','findAndCountAll','sendMessage','HOlXH','VerifyCampaigns','oFLOY','aZcWl','return\x20(function()\x20','HnAdm','connections','nXzzH','./services/Agendamento/AgendamentoService','GTCnb','jFSSO','XSqYp','jBlxR','ezOMM','findByPk','xvVIw','not','MHDXA','uRGBx','\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','hhfUl','YZzjw','enumerable','name','1544355lLkJvm','key','BcOoq','message4','DITCw','confirmationMessage2','format','lTgOi','status','__proto__','bkCxc','SEXUK','aoPao','OeizX','limiter','XDsmU','stateObject','rVMrQ','zvFVB','zpQeY','cHnJJ','isEmpty','YYYY-MM-DD\x20HH:mm','CDnfQ','SfeDT','DdIBC','YUgis','queueId','push','wxBXA','sCwOT','hueeI','YqrAS','fqyNB','GxmeO','msHFc','{numero}','bsWzR','pGpEA','zAFsL','error','getMessageOptions','defineProperty','aoTxF','OuUkS','ElQJT','connection','existsSync','EjNfE','messageInterval','findAll','select\x20id\x20from\x20\x22Users\x22\x20where\x20\x22updatedAt\x22\x20<\x20now()\x20-\x20\x275\x20minutes\x27::interval\x20and\x20online\x20=\x20true','YLxtq','parseToMilliseconds','GjhYB','emVCS','isNil','YtzJm','iBUZq','CVrjH','lodash','kmbrn','SUXMM','campaignQueue\x20->\x20PrepareContact\x20->\x20error:\x20','shipping','Iniciando\x20processamento\x20de\x20filas','JRJmL','LXZnw','jehwg','BbNIz','whatsapp','toString','eyqTF','RidNF','{nome}','search','wIbAw','VnKhq','qdkFl','iCtbb','action','default','recurrence2','XQtGP','variables','ppjtG','NVnhQ','corpo','sKkFf','hXlAU','LWMik','attributes','gqUzE','yeueg','czZfJ','warn','lfzbp','add','gger','userMonitor','KLOxK','__importDefault','PiIeS','WyvhD','UtWse','NFBFi','CRlHR','./models/CampaignShipping','PENDENTE','where','RTutA','luKws','WRPnI','IAkYY','milliseconds','xawoV','hMzpf','mZHmE','MefGV','iSZku','oWUNc','useCampaigns','YLQDE','VjznV','HswnC','*/5\x20*\x20*\x20*\x20*\x20*','DZvBC','zfkzo','include','OtteC','useWhatsapp','./helpers/SendMessage','confirmationMessage','ApsfG','CampaignQueue','INSERT','-campaign','LHaRE','max','FuYkQ','VeNYs','Mensagem\x20agendada\x20enviada\x20para:\x20','fjhlk','recurrence','6|4|3|11|8|5|10|1|7|2|9|0','lyMWq','diff','\x20AND\x20\x22dueDate\x22::text\x20LIKE\x20\x27','JELIa','Qxfva','lyAzN','GhKAg','GwgOJ','Arquivo\x20de\x20mídia\x20não\x20encontrado\x20para\x20a\x20campanha:\x20','znBLa','fxgLH','*\x20*\x20*\x20*\x20*','qWIOp','mssMS','LzuUu','messageQueue','replace','spAWe','Fechando\x20tickets\x20em\x20abertos\x20da\x20companyId:\x20','text','jvPlW','RtaSl','TFTTX','XYQMe','count','xlKAg','scheduleId','OEWmH','QXvAj','HDxKF','aXqlp','AqmKi','bull','azBfo','uLDoT','WMZZc','nbRay','./utils/logger','abQxq',';Registro=','GCuiw','hADVd','cVfep','brIRd','apply','ProcessCampaign','Nqfju','split','UmgiW','hSmzL','HaXUW','DEHbz','contact','qjnKt','greaterInterval','ikHfM','log','EaswT','length','WGtQY','BVSrT','VgkVf','EDRUj','NASZE','companyId','fZnDa','YfllH','prototype','confirmationMessage4','message2','exception','value','mtHht','ceDtr','./models/User','tnbtG','hWClK','bBFav','pCTBf','tetHn','eIIxq','iolmo','input','path','while\x20(true)\x20{}','ZaThT','useSchedules','ITJVF','526040vecRlP','oWADs','ITean','useInternalChat','RuIEP','ErkOa','message3','\x27,\x20','FBbkv','VerifyLoginStatus','KBRnF','bjgsl','UoUhG','recurrencediasemana','oKMKT','niKOW','EyrxL','PqhRl','gyhBh','lDiJB','JtJiL','sendScheduledMessages','chain','GTLIe','map','BwZFJ','TvxQI','Verify','eKaPy','GRqTg','tWqaH','asDays','ZJVsL','console','recurrencedia','PhhRA','env','HADWm','zvjyK','VgGCs','ybnvq','rBcPk','Hobpk','MnWcw','mediaPath','./models/Contact','fJmUO','ItDrp','WaqyD','jdoIu','email','confirmationMessage3','call','SendScheduledMessage\x20->\x20Verify:\x20error','749730CFHjRR','JiCKj','48072hmOlbs','GbLIT','YYYY-MM-DD\x20HH:mm:ss','wezTF','select\x20id,\x20\x22scheduledAt\x22\x20from\x20\x22Campaigns\x22\x20c\x0a\x20\x20\x20\x20where\x20\x22scheduledAt\x22\x20between\x20now()\x20and\x20now()\x20+\x20\x271\x20hour\x27::interval\x20and\x20status\x20=\x20\x27PROGRAMADA\x27','PzHSd','removeOnComplete','szAyF','DD/MM/yyyy','1773csWfDL','query','7|5|2|0|3|4|9|1|8|6|10|11','bxwef','VjGGr','delay','PrepareContact','configurable','model','*/20\x20*\x20*\x20*\x20*\x20*','gte','NhJtp','message','useInstagram','XIvah','ikjve','nJOhY','RsTEX','WufOw','xSNKH','XBPZr','dueDate','JxsOG','HH:mm:ss','IUQQl','repeat','lrKlm','jGYWF','bnhUK','scheduleMonitor'];a390_0x5bda=function(){return _0x27dbe9;};return a390_0x5bda();}function parseToMilliseconds(_0x3d39dd){const _0x4c724a=a390_0x19d92f,_0x54726e={};_0x54726e[_0x4c724a(0x330)]=function(_0x4ee498,_0x4ca905){return _0x4ee498*_0x4ca905;};const _0x2b554b=_0x54726e;return _0x2b554b[_0x4c724a(0x330)](_0x3d39dd,0x3e8);}exports[a390_0x19d92f(0x27f)]=parseToMilliseconds;async function sleep(_0x538272){const _0x51b7e8=a390_0x19d92f,_0xfc926b={'mIaQv':_0x51b7e8(0x3c4),'aLLHv':_0x51b7e8(0x2ac),'sxITe':function(_0x26a904,_0x12df6e){return _0x26a904!==_0x12df6e;},'DWmAU':_0x51b7e8(0x38b),'PLfuz':function(_0x37d477,_0xee7040){return _0x37d477(_0xee7040);},'TqvLe':_0x51b7e8(0x3d0),'YEfFV':'ssBvh','znBLa':function(_0x325756,_0x52e6fc,_0x4d0577){return _0x325756(_0x52e6fc,_0x4d0577);},'ElQJT':function(_0x4a9cb7,_0x4d1b17){return _0x4a9cb7(_0x4d1b17);}};return logger_1[_0x51b7e8(0x398)][_0x51b7e8(0x3d7)]('Sleep\x20de\x20'+_0x538272+_0x51b7e8(0x218)+(0x0,moment_1[_0x51b7e8(0x29b)])()['format'](_0x51b7e8(0x38b))),new Promise(_0x28c82f=>{const _0x3913b9=_0x51b7e8,_0x283d75={'FxWqr':_0xfc926b['mIaQv'],'XIvah':_0xfc926b[_0x3913b9(0x3a9)],'kLowN':function(_0x4edfe9,_0x222d62){const _0x560934=_0x3913b9;return _0xfc926b[_0x560934(0x420)](_0x4edfe9,_0x222d62);},'eIIxq':_0x3913b9(0x2b8),'lTgOi':_0xfc926b['DWmAU'],'VgGCs':function(_0x2d7a73,_0x3a492b){return _0xfc926b['PLfuz'](_0x2d7a73,_0x3a492b);}};_0xfc926b[_0x3913b9(0x420)](_0xfc926b[_0x3913b9(0x1d9)],_0xfc926b['YEfFV'])?_0xfc926b[_0x3913b9(0x2e4)](setTimeout,()=>{const _0x44a94e=_0x3913b9,_0x1d575a={};_0x1d575a[_0x44a94e(0x2f7)]=_0x283d75[_0x44a94e(0x3ab)],_0x1d575a['DZvBC']=_0x283d75[_0x44a94e(0x382)];const _0x3367d7=_0x1d575a;_0x283d75['kLowN'](_0x283d75[_0x44a94e(0x32b)],_0x283d75[_0x44a94e(0x32b)])?function(){return![];}['constructor'](rjGyGG[_0x44a94e(0x2f7)]+rjGyGG[_0x44a94e(0x2c8)])[_0x44a94e(0x307)](_0x44a94e(0x25a)):(logger_1[_0x44a94e(0x398)][_0x44a94e(0x3d7)](_0x44a94e(0x1db)+_0x538272+_0x44a94e(0x3d8)+(0x0,moment_1[_0x44a94e(0x29b)])()[_0x44a94e(0x250)](_0x283d75[_0x44a94e(0x251)])),_0x283d75[_0x44a94e(0x35a)](_0x28c82f,!![]));},_0xfc926b[_0x3913b9(0x277)](parseToMilliseconds,_0x538272)):_0x4ce915();});}function getCampaignValidMessages(_0x3eabea){const _0x276780=a390_0x19d92f,_0x47abd4={'oFLOY':function(_0x492734,_0x708e4a){return _0x492734(_0x708e4a);},'XYQMe':function(_0x368487,_0x32fac5){return _0x368487!==_0x32fac5;},'fZnDa':_0x276780(0x32a),'YtzJm':_0x276780(0x425),'NFBFi':_0x276780(0x23d),'ovhQx':function(_0x172112,_0x4b91f6){return _0x172112===_0x4b91f6;},'gttrO':_0x276780(0x3f8),'ikHfM':_0x276780(0x34d)},_0x144675=[];!(0x0,lodash_1[_0x276780(0x25f)])(_0x3eabea[_0x276780(0x211)])&&!(0x0,lodash_1['isNil'])(_0x3eabea[_0x276780(0x211)])&&(_0x47abd4[_0x276780(0x2f2)](_0x47abd4[_0x276780(0x31c)],_0x47abd4[_0x276780(0x283)])?_0x144675['push'](_0x3eabea[_0x276780(0x211)]):FursaD[_0x276780(0x234)](_0x38dbcc,0x0));!(0x0,lodash_1[_0x276780(0x25f)])(_0x3eabea[_0x276780(0x320)])&&!(0x0,lodash_1[_0x276780(0x282)])(_0x3eabea[_0x276780(0x320)])&&_0x144675['push'](_0x3eabea[_0x276780(0x320)]);if(!(0x0,lodash_1[_0x276780(0x25f)])(_0x3eabea['message3'])&&!(0x0,lodash_1['isNil'])(_0x3eabea[_0x276780(0x339)])){if(_0x47abd4[_0x276780(0x2b3)]!==_0x276780(0x239))_0x144675[_0x276780(0x266)](_0x3eabea['message3']);else{const _0xcc3f32={};return _0xcc3f32[_0x276780(0x29b)]=_0x511c44,_0x66eeef&&_0x54693c[_0x276780(0x423)]?_0x294d91:_0xcc3f32;}}if(!(0x0,lodash_1['isEmpty'])(_0x3eabea[_0x276780(0x24d)])&&!(0x0,lodash_1[_0x276780(0x282)])(_0x3eabea[_0x276780(0x24d)])){if(_0x47abd4[_0x276780(0x3ed)](_0x276780(0x23b),_0x47abd4['gttrO'])){const _0x5b8835={};_0x5b8835[_0x276780(0x248)]=!![],_0x5b8835[_0x276780(0x22b)]=function(){return _0x9f023b[_0x213812];},_0x4dbb20=_0x5b8835;}else _0x144675[_0x276780(0x266)](_0x3eabea[_0x276780(0x24d)]);}if(!(0x0,lodash_1[_0x276780(0x25f)])(_0x3eabea['message5'])&&!(0x0,lodash_1[_0x276780(0x282)])(_0x3eabea[_0x276780(0x3be)])){if(_0x47abd4[_0x276780(0x312)]===_0x47abd4['ikHfM'])_0x144675[_0x276780(0x266)](_0x3eabea[_0x276780(0x3be)]);else{const _0x523f5=_0xa43113[_0x276780(0x307)](_0x40d0fe,arguments);return _0x5e0b8a=null,_0x523f5;}}return _0x144675;}function getCampaignValidConfirmationMessages(_0x496029){const _0x35302b=a390_0x19d92f,_0x3b92d1={'fjhlk':'(((.+)+)+)+$','OoIhk':function(_0x5626e0,_0x11afa9){return _0x5626e0(_0x11afa9);},'vdzxA':function(_0x58320b,_0x6d6b87){return _0x58320b!==_0x6d6b87;},'zUoPk':_0x35302b(0x229),'vObtF':function(_0x4db0b1,_0x2fc102){return _0x4db0b1===_0x2fc102;},'yVilb':_0x35302b(0x34a),'VnKhq':_0x35302b(0x1f3),'GRqTg':_0x35302b(0x338)},_0x3a3e47=[];if(!(0x0,lodash_1[_0x35302b(0x25f)])(_0x496029[_0x35302b(0x3e3)])&&!(0x0,lodash_1[_0x35302b(0x282)])(_0x496029[_0x35302b(0x3e3)])){if(_0x3b92d1['vdzxA'](_0x3b92d1[_0x35302b(0x1de)],_0x3b92d1[_0x35302b(0x1de)]))return _0x491886[_0x35302b(0x291)]()[_0x35302b(0x295)](MpNupK[_0x35302b(0x2d8)])['toString']()[_0x35302b(0x3ac)](_0x3a3ca7)[_0x35302b(0x295)](MpNupK[_0x35302b(0x2d8)]);else _0x3a3e47['push'](_0x496029[_0x35302b(0x3e3)]);}return!(0x0,lodash_1[_0x35302b(0x25f)])(_0x496029[_0x35302b(0x24f)])&&!(0x0,lodash_1[_0x35302b(0x282)])(_0x496029[_0x35302b(0x24f)])&&_0x3a3e47[_0x35302b(0x266)](_0x496029[_0x35302b(0x24f)]),!(0x0,lodash_1[_0x35302b(0x25f)])(_0x496029['confirmationMessage3'])&&!(0x0,lodash_1['isNil'])(_0x496029['confirmationMessage3'])&&_0x3a3e47[_0x35302b(0x266)](_0x496029[_0x35302b(0x366)]),!(0x0,lodash_1[_0x35302b(0x25f)])(_0x496029[_0x35302b(0x31f)])&&!(0x0,lodash_1[_0x35302b(0x282)])(_0x496029[_0x35302b(0x31f)])&&(_0x3b92d1[_0x35302b(0x3aa)](_0x3b92d1[_0x35302b(0x3e1)],_0x3b92d1[_0x35302b(0x297)])?_0x4a9411+=_0x3b92d1[_0x35302b(0x212)](_0x138f09,_0x35a9e1[_0x35302b(0x311)]):_0x3a3e47['push'](_0x496029[_0x35302b(0x31f)])),!(0x0,lodash_1[_0x35302b(0x25f)])(_0x496029['confirmationMessage5'])&&!(0x0,lodash_1[_0x35302b(0x282)])(_0x496029[_0x35302b(0x429)])&&(_0x3b92d1[_0x35302b(0x350)]!==_0x3b92d1[_0x35302b(0x350)]?_0x312f64['push'](_0x35775c['confirmationMessage1']):_0x3a3e47[_0x35302b(0x266)](_0x496029[_0x35302b(0x429)])),_0x3a3e47;}function getProcessedMessage(_0x51b233,_0x5a91e8,_0x483224){const _0x590aef=a390_0x19d92f,_0x346bc5={};_0x346bc5[_0x590aef(0x3fb)]=function(_0x4f7de7,_0x500cbf){return _0x4f7de7===_0x500cbf;},_0x346bc5['sJwFc']=_0x590aef(0x25b),_0x346bc5[_0x590aef(0x351)]=_0x590aef(0x294),_0x346bc5[_0x590aef(0x30e)]=_0x590aef(0x215),_0x346bc5[_0x590aef(0x29f)]=_0x590aef(0x26e),_0x346bc5['cHnJJ']=function(_0x338658,_0x470477){return _0x338658!==_0x470477;},_0x346bc5[_0x590aef(0x3bd)]=_0x590aef(0x263);const _0x1b6d7a=_0x346bc5;let _0x467325=_0x51b233;return _0x467325['includes'](_0x1b6d7a[_0x590aef(0x351)])&&(_0x467325=_0x467325[_0x590aef(0x2eb)](/{nome}/g,_0x483224[_0x590aef(0x249)])),_0x467325[_0x590aef(0x1e3)](_0x1b6d7a['DEHbz'])&&(_0x467325=_0x467325[_0x590aef(0x2eb)](/{email}/g,_0x483224[_0x590aef(0x365)])),_0x467325['includes'](_0x1b6d7a[_0x590aef(0x29f)])&&(_0x1b6d7a[_0x590aef(0x25e)](_0x590aef(0x263),_0x1b6d7a['AWYMi'])?_0x294a65[_0x590aef(0x266)](_0x196071[_0x590aef(0x24d)]):_0x467325=_0x467325['replace'](/{numero}/g,_0x483224[_0x590aef(0x3cd)])),_0x5a91e8[_0x590aef(0x3a4)](_0x44a628=>{const _0x2dd969=_0x590aef;if(_0x1b6d7a[_0x2dd969(0x3fb)]('KPlvq',_0x1b6d7a[_0x2dd969(0x1d8)])){const _0x1600dd=_0x5cafa9?function(){const _0x26a31f=_0x2dd969;if(_0x2ef669){const _0x25799d=_0x3e8db8[_0x26a31f(0x307)](_0x5a5f89,arguments);return _0x39805a=null,_0x25799d;}}:function(){};return _0xd8063f=![],_0x1600dd;}else{if(_0x467325[_0x2dd969(0x1e3)]('{'+_0x44a628[_0x2dd969(0x24b)]+'}')){const _0x212617=new RegExp('{'+_0x44a628[_0x2dd969(0x24b)]+'}','g');_0x467325=_0x467325[_0x2dd969(0x2eb)](_0x212617,_0x44a628[_0x2dd969(0x322)]);}}}),_0x467325;}function randomValue(_0x429e3d,_0x5b4235){const _0x2b117d=a390_0x19d92f,_0x361195={};_0x361195[_0x2b117d(0x225)]=function(_0x41f5c4,_0x450277){return _0x41f5c4+_0x450277;},_0x361195[_0x2b117d(0x25c)]=function(_0x4ff685,_0x283c28){return _0x4ff685*_0x283c28;};const _0x482015=_0x361195;return _0x482015[_0x2b117d(0x225)](Math[_0x2b117d(0x1e6)](_0x482015['zvFVB'](Math['random'](),_0x5b4235)),_0x429e3d);}exports[a390_0x19d92f(0x39d)]=randomValue;async function verifyAndFinalizeCampaign(_0x165da0){const _0x4b6116=a390_0x19d92f,_0x44860e={};_0x44860e[_0x4b6116(0x223)]=function(_0x24377f,_0x10eeed){return _0x24377f===_0x10eeed;},_0x44860e[_0x4b6116(0x2ae)]=_0x4b6116(0x3c3);const _0x7374b=_0x44860e,{contacts:_0x3b1a2a}=_0x165da0[_0x4b6116(0x1d7)],_0x263a51=_0x3b1a2a[_0x4b6116(0x315)],_0x74247b={[sequelize_1['Op'][_0x4b6116(0x242)]]:null},_0x194a6a={};_0x194a6a[_0x4b6116(0x3db)]=_0x165da0['id'],_0x194a6a[_0x4b6116(0x421)]=_0x74247b;const _0x5e1c21={};_0x5e1c21[_0x4b6116(0x2b7)]=_0x194a6a;const _0x990a2e=await CampaignShipping_1[_0x4b6116(0x29b)][_0x4b6116(0x2f3)](_0x5e1c21);_0x7374b[_0x4b6116(0x223)](_0x263a51,_0x990a2e)&&await _0x165da0[_0x4b6116(0x3c3)]({'status':'FINALIZADA','completedAt':(0x0,moment_1[_0x4b6116(0x29b)])()});const _0x5987c9=(0x0,socket_1[_0x4b6116(0x424)])();_0x5987c9[_0x4b6116(0x1ef)](_0x4b6116(0x3ad)+_0x165da0[_0x4b6116(0x31b)]+_0x4b6116(0x2d2),{'action':_0x7374b[_0x4b6116(0x2ae)],'record':_0x165da0});}async function handleProcessCampaign(_0x3c8c4c){const _0x5f2709=a390_0x19d92f,_0x2f4792={'oWUNc':function(_0x35b3b7,_0x115dd9){return _0x35b3b7+_0x115dd9;},'NhJtp':function(_0x557edd,_0x44d9a8){return _0x557edd*_0x44d9a8;},'HADWm':_0x5f2709(0x29b),'WyvhD':'IFFNz','NyexX':_0x5f2709(0x217),'OtteC':function(_0x477acc,_0x3d5df4){return _0x477acc(_0x3d5df4);},'WOJQy':function(_0x1f4843,_0x508990){return _0x1f4843!==_0x508990;},'hCKfE':_0x5f2709(0x21e),'GzGGj':'PrepareContact','WaWay':function(_0x557375,_0x2d9a00){return _0x557375===_0x2d9a00;},'IbOkl':function(_0x36ea26,_0x1bd8e9){return _0x36ea26%_0x1bd8e9;},'kAbQk':function(_0x538b32,_0x2e47c3){return _0x538b32!==_0x2e47c3;},'Zyvdx':'JoXCe','eEMFX':function(_0x33ac5d,_0x402311,_0x6397d4){return _0x33ac5d(_0x402311,_0x6397d4);},'jfvSA':_0x5f2709(0x1e9),'EyrxL':function(_0x436d85,_0x5df052){return _0x436d85===_0x5df052;},'pCTBf':'qRDFQ'};try{if(_0x2f4792[_0x5f2709(0x2b1)]!==_0x2f4792[_0x5f2709(0x210)]){const {id:_0x832e73}=_0x3c8c4c[_0x5f2709(0x209)];let {delay:_0x394278}=_0x3c8c4c[_0x5f2709(0x209)];const _0x34a8c2=await _0x2f4792[_0x5f2709(0x2cb)](getCampaign,_0x832e73),_0x51ffcb=await getSettings(_0x34a8c2);if(_0x34a8c2){const {contacts:_0x24828f}=_0x34a8c2[_0x5f2709(0x1d7)];if((0x0,lodash_1[_0x5f2709(0x403)])(_0x24828f)){let _0xd59be4=0x0;for(let _0x28c790 of _0x24828f){if(_0x2f4792[_0x5f2709(0x201)](_0x2f4792['hCKfE'],_0x5f2709(0x21e)))return _0x2f4792[_0x5f2709(0x2c2)](_0x318eca[_0x5f2709(0x1e6)](_0x2f4792[_0x5f2709(0x37f)](_0x417b89['random'](),_0x25da39)),_0x5c9adb);else{const _0x22a621={};_0x22a621[_0x5f2709(0x3da)]=_0x28c790['id'],_0x22a621[_0x5f2709(0x3db)]=_0x34a8c2['id'],_0x22a621['variables']=_0x51ffcb[_0x5f2709(0x29e)],_0x22a621[_0x5f2709(0x379)]=_0x394278||0x0;const _0x1cb204={};_0x1cb204['removeOnComplete']=!![],exports[_0x5f2709(0x1e0)][_0x5f2709(0x2ab)](_0x2f4792[_0x5f2709(0x40b)],_0x22a621,_0x1cb204),logger_1[_0x5f2709(0x398)]['info'](_0x5f2709(0x3e7)+_0x34a8c2['id']+_0x5f2709(0x20f)+_0x28c790[_0x5f2709(0x249)]+';delay='+_0x394278),_0xd59be4++;if(_0x2f4792[_0x5f2709(0x1da)](_0x2f4792[_0x5f2709(0x3b2)](_0xd59be4,_0x51ffcb[_0x5f2709(0x401)]),0x0))_0x2f4792[_0x5f2709(0x21a)](_0x5f2709(0x323),'mtHht')?_0x1eb57c[_0x2f4792[_0x5f2709(0x358)]]=_0x91e449:_0x394278+=_0x2f4792['OtteC'](parseToMilliseconds,_0x51ffcb[_0x5f2709(0x311)]);else{if(_0x2f4792[_0x5f2709(0x1da)](_0x2f4792['Zyvdx'],_0x2f4792[_0x5f2709(0x1d0)]))_0x394278+=_0x2f4792[_0x5f2709(0x2cb)](parseToMilliseconds,_0x2f4792['eEMFX'](randomValue,0x0,_0x51ffcb[_0x5f2709(0x27b)]));else return!![];}}}const _0x470ef2={};_0x470ef2['status']=_0x2f4792[_0x5f2709(0x3a7)],await _0x34a8c2[_0x5f2709(0x3c3)](_0x470ef2);}}}else _0xeca0fb=_0x39366b;}catch(_0x4ee474){if(_0x2f4792[_0x5f2709(0x343)](_0x2f4792[_0x5f2709(0x329)],'CCkOY')){if(_0x1ea1d8[_0x5f2709(0x1e3)]('{'+_0x3708f3[_0x5f2709(0x24b)]+'}')){const _0x1d351d=new _0x49339c('{'+_0x343c2f[_0x5f2709(0x24b)]+'}','g');_0x197bba=_0x24425e[_0x5f2709(0x2eb)](_0x1d351d,_0x58f53f[_0x5f2709(0x322)]);}}else Sentry[_0x5f2709(0x3f0)](_0x4ee474);}}async function handlePrepareContact(_0x3bb4ca){const _0x909038=a390_0x19d92f,_0x204bda={'VCOIr':_0x909038(0x1df),'SIgKt':_0x909038(0x41a),'DhKJR':_0x909038(0x34e),'BcOoq':_0x909038(0x233),'ezOMM':_0x909038(0x308),'Alqtl':_0x909038(0x2c7),'eKaPy':_0x909038(0x28b),'HOlXH':'VerifyLoginStatus','WGtQY':'PrepareContact','PiIeS':_0x909038(0x37d),'OWewi':_0x909038(0x2e6),'CWFCZ':function(_0x262956,_0x3f6e9a){return _0x262956(_0x3f6e9a);},'YLQDE':function(_0x2fe630,_0x347039){return _0x2fe630+_0x347039;},'brIRd':function(_0x39bb62,_0x3f80e4){return _0x39bb62+_0x3f80e4;},'hWClK':_0x909038(0x3af),'cVfep':function(_0x3f7913,_0x3ed98e){return _0x3f7913!==_0x3ed98e;},'WufOw':_0x909038(0x3f3),'XQtGP':function(_0x3aa6f6,_0x54b564){return _0x3aa6f6(_0x54b564);},'CjsAx':function(_0x531c53,_0x3a5b18){return _0x531c53(_0x3a5b18);},'bkCxc':'MKEYs','kmbrn':function(_0x505f0a,_0xeb615d,_0x3fc18a){return _0x505f0a(_0xeb615d,_0x3fc18a);},'lYLnv':function(_0x370ed3,_0x33ccd5,_0x2fbf95,_0x2b33cd){return _0x370ed3(_0x33ccd5,_0x2fbf95,_0x2b33cd);},'jBlxR':function(_0x17cc60,_0x5ce43d,_0xdaa3a1,_0x4124d5){return _0x17cc60(_0x5ce43d,_0xdaa3a1,_0x4124d5);},'ofwcv':function(_0x54b41b,_0x237359){return _0x54b41b===_0x237359;},'fxgLH':function(_0x424c55,_0x952829){return _0x424c55===_0x952829;},'DITCw':function(_0x136003,_0x4be1cb){return _0x136003===_0x4be1cb;},'zfkzo':'YLxtq','fJmUO':function(_0x219de6,_0x4871fa){return _0x219de6(_0x4871fa);},'OgCVG':function(_0x12ecd0,_0x452bf9){return _0x12ecd0===_0x452bf9;},'wezTF':'pCFFW'};try{if(_0x204bda[_0x909038(0x305)](_0x204bda[_0x909038(0x386)],_0x204bda['WufOw'])){if(_0x3ff780){const _0x3cb8be=_0x11fb46[_0x909038(0x307)](_0x34ca43,arguments);return _0x341f74=null,_0x3cb8be;}}else{const {contactId:_0x3db5ae,campaignId:_0x41110a,delay:_0x582c67,variables:_0x217070}=_0x3bb4ca[_0x909038(0x209)],_0x573936=await _0x204bda[_0x909038(0x29d)](getCampaign,_0x41110a),_0x2a4797=await _0x204bda[_0x909038(0x419)](getContact,_0x3db5ae),_0x21a500={};_0x21a500[_0x909038(0x3cd)]=_0x2a4797[_0x909038(0x3cd)],_0x21a500[_0x909038(0x3da)]=_0x3db5ae,_0x21a500[_0x909038(0x3db)]=_0x41110a;const _0x5e06a8=_0x204bda['CWFCZ'](getCampaignValidMessages,_0x573936);if(_0x5e06a8['length']){if(_0x204bda[_0x909038(0x254)]!==_0x204bda['bkCxc']){const _0x28153d=_0x909038(0x376)['split']('|');let _0x3a64fc=0x0;while(!![]){switch(_0x28153d[_0x3a64fc++]){case'0':_0x40788f[_0x909038(0x348)][_0x909038(0x3ec)](_0x204bda['VCOIr'],_0x2ea49a);continue;case'1':_0x10109c['campaignQueue']['process'](_0x204bda[_0x909038(0x41e)],_0x403976);continue;case'2':_0x216c13[_0x909038(0x391)]['process'](_0x204bda['DhKJR'],_0x1454e2);continue;case'3':_0x2316ef[_0x909038(0x1e0)][_0x909038(0x3ec)](_0x204bda[_0x909038(0x24c)],_0x394227);continue;case'4':_0x4a5c4e[_0x909038(0x1e0)][_0x909038(0x3ec)](_0x204bda[_0x909038(0x23f)],_0x3c82c4);continue;case'5':_0x43ab70[_0x909038(0x2ea)][_0x909038(0x3ec)](_0x909038(0x1df),_0x43ee77);continue;case'6':_0x3396a9[_0x909038(0x391)]['add'](_0x204bda['DhKJR'],{},{'repeat':{'cron':_0x204bda[_0x909038(0x3b0)]},'removeOnComplete':!![]});continue;case'7':_0x25c1db[_0x909038(0x398)]['info'](_0x204bda[_0x909038(0x34f)]);continue;case'8':_0x251f64['userMonitor'][_0x909038(0x3ec)](_0x204bda[_0x909038(0x232)],_0x2e1181);continue;case'9':_0x1ab4c9[_0x909038(0x1e0)]['process'](_0x204bda[_0x909038(0x316)],_0xf795bd);continue;case'10':_0x59b0c1[_0x909038(0x1e0)][_0x909038(0x2ab)](_0x204bda[_0x909038(0x24c)],{},{'repeat':{'cron':_0x204bda[_0x909038(0x2b0)]},'removeOnComplete':!![]});continue;case'11':_0x1ded4b[_0x909038(0x2ad)][_0x909038(0x2ab)](_0x204bda[_0x909038(0x232)],{},{'repeat':{'cron':_0x204bda['OWewi']},'removeOnComplete':!![]});continue;}break;}}else{const _0x195c38=_0x204bda[_0x909038(0x287)](randomValue,0x0,_0x5e06a8[_0x909038(0x315)]),_0x7315e6=_0x204bda['lYLnv'](getProcessedMessage,_0x5e06a8[_0x195c38],_0x217070,_0x2a4797);_0x21a500['message']='‌'+_0x7315e6;}}if(_0x573936[_0x909038(0x216)]){const _0x4c96f4=getCampaignValidConfirmationMessages(_0x573936);if(_0x4c96f4[_0x909038(0x315)]){const _0x277002=randomValue(0x0,_0x4c96f4[_0x909038(0x315)]),_0x3feea4=_0x204bda[_0x909038(0x23e)](getProcessedMessage,_0x4c96f4[_0x277002],_0x217070,_0x2a4797);_0x21a500[_0x909038(0x2ce)]='‌'+_0x3feea4;}}const _0x372a49={};_0x372a49[_0x909038(0x3db)]=_0x21a500['campaignId'],_0x372a49[_0x909038(0x3da)]=_0x21a500[_0x909038(0x3da)];const _0x4e8faf={};_0x4e8faf[_0x909038(0x2b7)]=_0x372a49,_0x4e8faf[_0x909038(0x220)]=_0x21a500;const [_0x5619d6,_0x2bf5db]=await CampaignShipping_1[_0x909038(0x29b)]['findOrCreate'](_0x4e8faf);!_0x2bf5db&&_0x204bda['ofwcv'](_0x5619d6[_0x909038(0x421)],null)&&_0x204bda[_0x909038(0x3c6)](_0x5619d6['confirmationRequestedAt'],null)&&(_0x5619d6['set'](_0x21a500),await _0x5619d6[_0x909038(0x1f5)]());if(_0x204bda[_0x909038(0x2e5)](_0x5619d6[_0x909038(0x421)],null)&&_0x204bda[_0x909038(0x24e)](_0x5619d6['confirmationRequestedAt'],null)){if(_0x204bda['cVfep'](_0x204bda[_0x909038(0x2c9)],_0x909038(0x27e)))_0x2d59da=UBBEYR['CWFCZ'](_0x3868bf,UBBEYR[_0x909038(0x2c4)](UBBEYR[_0x909038(0x306)]('return\x20(function()\x20',UBBEYR[_0x909038(0x327)]),');'))();else{const _0x5368ac={};_0x5368ac[_0x909038(0x3db)]=_0x573936['id'],_0x5368ac[_0x909038(0x1d4)]=_0x5619d6['id'],_0x5368ac['contactListItemId']=_0x3db5ae;const _0x11b0cb={};_0x11b0cb[_0x909038(0x379)]=_0x582c67;const _0x12e15b=await exports['campaignQueue'][_0x909038(0x2ab)](_0x204bda[_0x909038(0x41e)],_0x5368ac,_0x11b0cb),_0x2a0f5e={};_0x2a0f5e['jobId']=_0x12e15b['id'],await _0x5619d6[_0x909038(0x3c3)](_0x2a0f5e);}}await _0x204bda[_0x909038(0x361)](verifyAndFinalizeCampaign,_0x573936);}}catch(_0x311d71){_0x204bda['OgCVG'](_0x204bda[_0x909038(0x36e)],_0x909038(0x3ca))?(_0x504a4d['captureException'](_0x38b19f),_0x26f908[_0x909038(0x398)][_0x909038(0x3d7)](_0x909038(0x1d5)+_0x54b3a2['id'])):(Sentry[_0x909038(0x3f0)](_0x311d71),logger_1[_0x909038(0x398)]['error'](_0x909038(0x289)+_0x311d71[_0x909038(0x380)]));}}async function handleDispatchCampaign(_0x4c8e0d){const _0x4a663d=a390_0x19d92f,_0x505876={'YUgis':function(_0x51047c,_0x4ad37a){return _0x51047c+_0x4ad37a;},'Lrymg':_0x4a663d(0x3c4),'UaLJo':_0x4a663d(0x2ac),'LWMik':_0x4a663d(0x29a),'muvDz':function(_0x53e274,_0x513246){return _0x53e274(_0x513246);},'dicuo':function(_0x4941be,_0x5e082d){return _0x4941be+_0x5e082d;},'LCDoh':_0x4a663d(0x236),'phHHu':_0x4a663d(0x3af),'KBRnF':function(_0x5e3f43,_0x2c6cc8){return _0x5e3f43!==_0x2c6cc8;},'UtWse':'MDAPC','PcoZP':_0x4a663d(0x3ea),'PzHSd':_0x4a663d(0x30f),'niKOW':function(_0x3f5752,_0x1b4f3e){return _0x3f5752===_0x1b4f3e;},'OEWmH':_0x4a663d(0x363),'ZkDoj':_0x4a663d(0x26a),'yeueg':'xNabl','mcULr':_0x4a663d(0x2d5),'qkIMX':_0x4a663d(0x2c0),'oWADs':'WDpNy','iBUZq':_0x4a663d(0x304),'pbLfS':_0x4a663d(0x3c3)};try{if(_0x505876[_0x4a663d(0x33d)](_0x505876[_0x4a663d(0x2b2)],_0x505876['PcoZP'])){const {data:_0x2224e4}=_0x4c8e0d,{campaignShippingId:_0x2670df,campaignId:_0x5520de}=_0x2224e4,_0x32899b=await getCampaign(_0x5520de),_0x23cdc5=await(0x0,GetWhatsappWbot_1[_0x4a663d(0x29b)])(_0x32899b[_0x4a663d(0x290)]);logger_1[_0x4a663d(0x398)][_0x4a663d(0x3d7)]('Disparo\x20de\x20campanha\x20solicitado:\x20Campanha='+_0x5520de+_0x4a663d(0x302)+_0x2670df);const _0x1808ee={};_0x1808ee[_0x4a663d(0x37c)]=ContactListItem_1[_0x4a663d(0x29b)],_0x1808ee['as']=_0x505876[_0x4a663d(0x370)];const _0x3775fd={};_0x3775fd[_0x4a663d(0x2ca)]=[_0x1808ee];const _0x261474=await CampaignShipping_1[_0x4a663d(0x29b)]['findByPk'](_0x2670df,_0x3775fd),_0x3e4988=_0x261474[_0x4a663d(0x3cd)]+_0x4a663d(0x221);if(_0x32899b[_0x4a663d(0x216)]&&_0x261474[_0x4a663d(0x216)]===null){if(_0x505876['KBRnF'](_0x4a663d(0x2e9),'FltRJ')){const _0x328346={};_0x328346[_0x4a663d(0x2ee)]=_0x261474[_0x4a663d(0x2ce)],await _0x23cdc5[_0x4a663d(0x231)](_0x3e4988,_0x328346),await _0x261474[_0x4a663d(0x3c3)]({'confirmationRequestedAt':(0x0,moment_1[_0x4a663d(0x29b)])()});}else{const _0x524373=_0x513844?function(){const _0x525c8e=_0x4a663d;if(_0x1049ca){const _0x55641c=_0x32f2a1[_0x525c8e(0x307)](_0x527398,arguments);return _0x445a0d=null,_0x55641c;}}:function(){};return _0x5c4087=![],_0x524373;}}else{if(_0x505876[_0x4a663d(0x342)](_0x505876[_0x4a663d(0x2f6)],_0x505876[_0x4a663d(0x2f6)])){const _0x4b89d6={};_0x4b89d6[_0x4a663d(0x2ee)]=_0x261474['message'],await _0x23cdc5['sendMessage'](_0x3e4988,_0x4b89d6);if(_0x32899b[_0x4a663d(0x35f)]){if(_0x505876['KBRnF'](_0x4a663d(0x256),'wUuqv')){const _0x123ae3=path_1['default'][_0x4a663d(0x224)](_0x4a663d(0x1dc)+_0x32899b[_0x4a663d(0x31b)],_0x32899b[_0x4a663d(0x35f)]);let _0x16126a;if(fs['existsSync'](_0x123ae3))_0x16126a=_0x123ae3;else{if(_0x505876[_0x4a663d(0x33d)](_0x505876['ZkDoj'],_0x505876[_0x4a663d(0x2a7)])){const _0x12f423=path_1['default']['resolve'](_0x4a663d(0x1f0),_0x32899b[_0x4a663d(0x35f)]);if(fs[_0x4a663d(0x279)](_0x12f423))_0x16126a=_0x12f423;else{if(_0x505876['KBRnF'](_0x505876[_0x4a663d(0x416)],_0x505876[_0x4a663d(0x3b7)])){console[_0x4a663d(0x272)](_0x4a663d(0x2e3)+_0x32899b['id']);return;}else(function(){return!![];}[_0x4a663d(0x3ac)](VPBZDG[_0x4a663d(0x264)](VPBZDG[_0x4a663d(0x404)],VPBZDG[_0x4a663d(0x39a)]))[_0x4a663d(0x367)](VPBZDG[_0x4a663d(0x2a4)]));}}else _0xf8ed67[_0x4a663d(0x266)](_0x1c97b[_0x4a663d(0x3be)]);}const _0xcd41c1='',_0x4612e9=await(0x0,SendWhatsAppMedia_1[_0x4a663d(0x273)])(_0xcd41c1,_0x32899b['mediaName'],_0x16126a);if(Object[_0x4a663d(0x1d2)](_0x4612e9)[_0x4a663d(0x315)]){if(_0x505876[_0x4a663d(0x334)]!==_0x505876[_0x4a663d(0x284)]){const _0x1bebb3={..._0x4612e9};await _0x23cdc5['sendMessage'](_0x3e4988,_0x1bebb3);}else _0x53cd48[_0x4a663d(0x266)](_0x517a07[_0x4a663d(0x339)]);}}else return _0x3d97f7[_0x34f374];}await _0x261474['update']({'deliveredAt':(0x0,moment_1[_0x4a663d(0x29b)])()});}else{let _0x18c7d2;try{_0x18c7d2=VPBZDG[_0x4a663d(0x22d)](_0x77a127,VPBZDG[_0x4a663d(0x3c7)](VPBZDG['dicuo'](VPBZDG[_0x4a663d(0x1d3)],VPBZDG[_0x4a663d(0x3fc)]),');'))();}catch(_0x21f28e){_0x18c7d2=_0x7da734;}return _0x18c7d2;}}await _0x505876[_0x4a663d(0x22d)](verifyAndFinalizeCampaign,_0x32899b);const _0x2877fc=(0x0,socket_1[_0x4a663d(0x424)])();_0x2877fc[_0x4a663d(0x1ef)](_0x4a663d(0x3ad)+_0x32899b[_0x4a663d(0x31b)]+_0x4a663d(0x2d2),{'action':_0x505876['pbLfS'],'record':_0x32899b}),logger_1[_0x4a663d(0x398)][_0x4a663d(0x3d7)](_0x4a663d(0x20c)+_0x5520de+_0x4a663d(0x20f)+_0x261474[_0x4a663d(0x30f)][_0x4a663d(0x249)]);}else _0x86ba3d[_0x4a663d(0x266)](_0xf525cf['confirmationMessage2']);}catch(_0x12447e){Sentry[_0x4a663d(0x3f0)](_0x12447e),logger_1[_0x4a663d(0x398)]['error'](_0x12447e[_0x4a663d(0x380)]);}}async function handleLoginStatus(_0x3413f1){const _0x2d26af=a390_0x19d92f,_0x2a6ab8={'xOZnK':_0x2d26af(0x3f1),'dQlSL':_0x2d26af(0x245),'WknMP':'init','WKCDk':function(_0x438bee,_0x8df8a0){return _0x438bee+_0x8df8a0;},'SfloE':function(_0x317f4d,_0x1a80f2){return _0x317f4d+_0x1a80f2;},'oqJGD':_0x2d26af(0x32d),'hXlAU':function(_0x2693ec,_0x4b137b){return _0x2693ec(_0x4b137b);},'uLDoT':function(_0x44d572){return _0x44d572();},'EDRUj':function(_0x36d10a,_0x3390d7){return _0x36d10a===_0x3390d7;},'xlKAg':_0x2d26af(0x1ee),'WwoIK':function(_0x447ddc,_0x56b515){return _0x447ddc!==_0x56b515;},'jCJMX':_0x2d26af(0x247)},_0x35fe10={};_0x35fe10[_0x2d26af(0x409)]=sequelize_1[_0x2d26af(0x3d6)][_0x2d26af(0x39e)];const _0x8309d0=await database_1['default'][_0x2d26af(0x375)](_0x2d26af(0x27d),_0x35fe10);for(let _0x51f6f0 of _0x8309d0){if(_0x2a6ab8[_0x2d26af(0x319)](_0x2a6ab8[_0x2d26af(0x2f4)],_0x2d26af(0x39f)))_0xdda0b3=_0x4a3393['replace'](/{nome}/g,_0x4e6457['name']);else try{const _0x121c56=await User_1[_0x2d26af(0x29b)][_0x2d26af(0x240)](_0x51f6f0['id']),_0x23cdef={};_0x23cdef[_0x2d26af(0x3c1)]=![],await _0x121c56['update'](_0x23cdef),logger_1['logger'][_0x2d26af(0x3d7)](_0x2d26af(0x412)+_0x51f6f0['id']);}catch(_0x38469f){if(_0x2a6ab8['WwoIK'](_0x2a6ab8['jCJMX'],'YZzjw')){const _0x2aef03=new _0x849f7e(NMHUXW['xOZnK']),_0x55931a=new _0x1115e7(NMHUXW['dQlSL'],'i'),_0x20486c=_0x572db8(NMHUXW[_0x2d26af(0x41b)]);!_0x2aef03[_0x2d26af(0x397)](NMHUXW[_0x2d26af(0x399)](_0x20486c,_0x2d26af(0x349)))||!_0x55931a[_0x2d26af(0x397)](NMHUXW['SfloE'](_0x20486c,NMHUXW['oqJGD']))?NMHUXW[_0x2d26af(0x2a3)](_0x20486c,'0'):NMHUXW[_0x2d26af(0x2fd)](_0x17a1f0);}else Sentry[_0x2d26af(0x3f0)](_0x38469f);}}}async function handleInvoiceCreate(){const _0x12a05f=a390_0x19d92f,_0x3e44fe={};_0x3e44fe[_0x12a05f(0x388)]=function(_0x3ffe67,_0x4caf06){return _0x3ffe67<_0x4caf06;},_0x3e44fe[_0x12a05f(0x1f2)]=function(_0x11a884,_0xa424d6){return _0x11a884!==_0xa424d6;},_0x3e44fe[_0x12a05f(0x25d)]='yyyy-MM-DD',_0x3e44fe[_0x12a05f(0x2f0)]=_0x12a05f(0x310),_0x3e44fe[_0x12a05f(0x1fb)]='0\x20*\x20*\x20*\x20*\x20*';const _0x5ddc7f=_0x3e44fe,_0x44bbdb=new CronJob(_0x5ddc7f[_0x12a05f(0x1fb)],async()=>{const _0x281ae7=_0x12a05f,_0x2a00e6={'DlAKi':_0x281ae7(0x235),'bjgsl':_0x281ae7(0x373),'zIfYQ':function(_0x7291ad,_0x598ee6){const _0x200d06=_0x281ae7;return _0x5ddc7f[_0x200d06(0x388)](_0x7291ad,_0x598ee6);},'GCuiw':function(_0x48f174,_0x2e007d){const _0x56a9f9=_0x281ae7;return _0x5ddc7f[_0x56a9f9(0x1f2)](_0x48f174,_0x2e007d);},'ITean':_0x281ae7(0x390),'vJEap':_0x5ddc7f[_0x281ae7(0x25d)],'ItmUy':_0x5ddc7f[_0x281ae7(0x2f0)]},_0x4351f6=await Company_1[_0x281ae7(0x29b)]['findAll']();_0x4351f6[_0x281ae7(0x34b)](async _0x50b24c=>{const _0x2de311=_0x281ae7;if(_0x2de311(0x235)===_0x2a00e6[_0x2de311(0x21b)]){var _0x92373d=_0x50b24c[_0x2de311(0x389)];const _0x1726ad=(0x0,moment_1[_0x2de311(0x29b)])(_0x92373d)[_0x2de311(0x250)](),_0x3149fd=(0x0,moment_1['default'])()[_0x2de311(0x250)](),_0x4ef18b=(0x0,moment_1[_0x2de311(0x29b)])((0x0,moment_1[_0x2de311(0x29b)])())[_0x2de311(0x250)](_0x2a00e6[_0x2de311(0x33e)]);var _0x5df491=(0x0,moment_1['default'])(_0x92373d)[_0x2de311(0x250)](_0x2a00e6['bjgsl']),_0x3fa043=(0x0,moment_1['default'])(_0x5df491,_0x2a00e6[_0x2de311(0x33e)])[_0x2de311(0x2dc)]((0x0,moment_1[_0x2de311(0x29b)])(_0x4ef18b,_0x2a00e6['bjgsl'])),_0x56cb4f=moment_1[_0x2de311(0x29b)][_0x2de311(0x3a5)](_0x3fa043)[_0x2de311(0x352)]();if(_0x2a00e6[_0x2de311(0x3e9)](_0x56cb4f,0x1e)){if(_0x2a00e6[_0x2de311(0x303)](_0x2a00e6[_0x2de311(0x335)],_0x2de311(0x390)))_0x5e02b2[_0x2de311(0x266)](_0xdcdbcc[_0x2de311(0x320)]);else{const _0x19a67b=await Plan_1[_0x2de311(0x29b)]['findByPk'](_0x50b24c[_0x2de311(0x20d)]),_0xe75ee7='SELECT\x20COUNT(*)\x20mycount\x20FROM\x20\x22Invoices\x22\x20WHERE\x20\x22companyId\x22\x20=\x20'+_0x50b24c['id']+_0x2de311(0x2dd)+(0x0,moment_1['default'])(_0x92373d)[_0x2de311(0x250)](_0x2a00e6[_0x2de311(0x3e0)])+_0x2de311(0x1eb),_0x9f41a4={};_0x9f41a4['type']=sequelize_1[_0x2de311(0x3d6)][_0x2de311(0x39e)];const _0x5500ae=await database_1[_0x2de311(0x29b)][_0x2de311(0x375)](_0xe75ee7,_0x9f41a4);if(_0x5500ae[0x0]['mycount']>0x0){}else{if(_0x2a00e6[_0x2de311(0x303)]('qjnKt',_0x2a00e6[_0x2de311(0x219)])){const _0x575fbd=_0x24bdcb[_0x2de311(0x307)](_0x198adc,arguments);return _0x3dee83=null,_0x575fbd;}else{const _0x5667c4=_0x19a67b[_0x2de311(0x1e5)]['replace'](',','.'),_0x54cd58='INSERT\x20INTO\x20\x22Invoices\x22\x20(detail,\x20status,\x20value,\x20\x22updatedAt\x22,\x20\x22createdAt\x22,\x20\x22dueDate\x22,\x20\x22companyId\x22,\x20\x22users\x22,\x20\x22connections\x22,\x20\x22queues\x22,\x20\x22useWhatsapp\x22,\x20\x22useFacebook\x22,\x20\x22useInstagram\x22,\x20\x22useCampaigns\x22,\x20\x22useSchedules\x22,\x20\x22useInternalChat\x22,\x20\x22useExternalApi\x22)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20VALUES\x20(\x27'+_0x19a67b[_0x2de311(0x249)]+'\x27,\x20\x27open\x27,\x20'+_0x5667c4+',\x20\x27'+_0x3149fd+_0x2de311(0x1e8)+_0x3149fd+'\x27,\x20\x27'+_0x1726ad+_0x2de311(0x33a)+_0x50b24c['id']+',\x20'+_0x19a67b[_0x2de311(0x3b6)]+',\x20'+_0x19a67b[_0x2de311(0x238)]+',\x20'+_0x19a67b[_0x2de311(0x3b1)]+',\x20'+_0x19a67b[_0x2de311(0x2cc)]+',\x20'+_0x19a67b[_0x2de311(0x39c)]+',\x20'+_0x19a67b[_0x2de311(0x381)]+',\x20'+_0x19a67b[_0x2de311(0x2c3)]+',\x20'+_0x19a67b[_0x2de311(0x331)]+',\x20'+_0x19a67b[_0x2de311(0x336)]+',\x20'+_0x19a67b['useExternalApi']+');',_0x10cc1d={};_0x10cc1d[_0x2de311(0x409)]=sequelize_1[_0x2de311(0x3d6)][_0x2de311(0x2d1)];const _0x2a4ef1=await database_1[_0x2de311(0x29b)][_0x2de311(0x375)](_0x54cd58,_0x10cc1d);}}}}}else _0x1f70aa[_0x2de311(0x3f0)](_0x2b82ae);});});_0x44bbdb[_0x12a05f(0x3df)]();}async function handleCloseTicketsAutomatic(){const _0x58adf4=a390_0x19d92f,_0x5eae31={};_0x5eae31['GVqxE']='counter',_0x5eae31['YwUyl']='SendScheduledMessage\x20->\x20Verify:\x20error',_0x5eae31[_0x58adf4(0x3f7)]='5\x20*\x20*\x20*\x20*\x20*';const _0x4a1ae4=_0x5eae31,_0x28951e=new CronJob(_0x4a1ae4[_0x58adf4(0x3f7)],async()=>{const _0x2b35a2=_0x58adf4,_0xaf72d6={};_0xaf72d6[_0x2b35a2(0x1f4)]=_0x4a1ae4['GVqxE'],_0xaf72d6['VgkVf']=_0x2b35a2(0x3a2),_0xaf72d6['SQQfB']=_0x4a1ae4[_0x2b35a2(0x39b)];const _0x33ad31=_0xaf72d6,_0x20636e=await Company_1[_0x2b35a2(0x29b)][_0x2b35a2(0x27c)]();_0x20636e[_0x2b35a2(0x34b)](async _0x285a2b=>{const _0x44ac6a=_0x2b35a2,_0x5d0f91={};_0x5d0f91[_0x44ac6a(0x384)]=_0x44ac6a(0x32f),_0x5d0f91[_0x44ac6a(0x2be)]=_0x33ad31[_0x44ac6a(0x1f4)];const _0x9e4e3c=_0x5d0f91;try{const _0x5580f4=_0x285a2b['id'];await(0x0,wbotClosedTickets_1['ClosedAllOpenTickets'])(_0x5580f4),logger_1[_0x44ac6a(0x398)][_0x44ac6a(0x3d7)](_0x44ac6a(0x2ed)+_0x5580f4);}catch(_0x5edc19){if(_0x33ad31[_0x44ac6a(0x318)]===_0x33ad31[_0x44ac6a(0x318)]){Sentry[_0x44ac6a(0x3f0)](_0x5edc19),logger_1[_0x44ac6a(0x398)][_0x44ac6a(0x272)](_0x33ad31['SQQfB'],_0x5edc19[_0x44ac6a(0x380)]);throw _0x5edc19;}else return function(_0x368782){}[_0x44ac6a(0x3ac)](RiMrtk[_0x44ac6a(0x384)])[_0x44ac6a(0x307)](RiMrtk[_0x44ac6a(0x2be)]);}});});_0x28951e[_0x58adf4(0x3df)]();}handleCloseTicketsAutomatic(),handleInvoiceCreate();async function startQueueProcess(){const _0x276f86=a390_0x19d92f,_0xec8bc0={};_0xec8bc0[_0x276f86(0x20b)]=_0x276f86(0x2da),_0xec8bc0['brQaX']='*\x20*\x20*\x20*\x20*',_0xec8bc0[_0x276f86(0x2a0)]=_0x276f86(0x41a),_0xec8bc0[_0x276f86(0x3c8)]=_0x276f86(0x34e),_0xec8bc0[_0x276f86(0x2e7)]=_0x276f86(0x2c7),_0xec8bc0[_0x276f86(0x359)]=_0x276f86(0x1df),_0xec8bc0['JaIUk']='ProcessCampaign',_0xec8bc0[_0x276f86(0x341)]=_0x276f86(0x28b),_0xec8bc0['YVXWK']=_0x276f86(0x33c),_0xec8bc0[_0x276f86(0x21d)]=_0x276f86(0x233),_0xec8bc0[_0x276f86(0x408)]=_0x276f86(0x37d);const _0x52a831=_0xec8bc0,_0x56de33=_0x52a831['UtrMG'][_0x276f86(0x30a)]('|');let _0x5034b8=0x0;while(!![]){switch(_0x56de33[_0x5034b8++]){case'0':const _0x4a0961={};_0x4a0961[_0x276f86(0x427)]=_0x52a831[_0x276f86(0x3c2)];const _0x385f2d={};_0x385f2d[_0x276f86(0x38d)]=_0x4a0961,_0x385f2d[_0x276f86(0x371)]=!![],exports[_0x276f86(0x2ad)][_0x276f86(0x2ab)](_0x276f86(0x33c),{},_0x385f2d);continue;case'1':exports[_0x276f86(0x1e0)][_0x276f86(0x3ec)](_0x52a831[_0x276f86(0x2a0)],handleDispatchCampaign);continue;case'2':exports['scheduleMonitor'][_0x276f86(0x2ab)](_0x52a831['gpWEy'],{},{'repeat':{'cron':_0x52a831[_0x276f86(0x2e7)]},'removeOnComplete':!![]});continue;case'3':exports[_0x276f86(0x391)][_0x276f86(0x3ec)](_0x52a831[_0x276f86(0x3c8)],handleVerifySchedules);continue;case'4':exports[_0x276f86(0x2ea)][_0x276f86(0x3ec)](_0x52a831[_0x276f86(0x359)],handleSendMessage);continue;case'5':exports[_0x276f86(0x1e0)][_0x276f86(0x3ec)](_0x52a831[_0x276f86(0x407)],handleProcessCampaign);continue;case'6':logger_1['logger'][_0x276f86(0x3d7)](_0x52a831['oKMKT']);continue;case'7':exports['userMonitor'][_0x276f86(0x3ec)](_0x52a831[_0x276f86(0x3fd)],handleLoginStatus);continue;case'8':exports[_0x276f86(0x1e0)][_0x276f86(0x3ec)](_0x52a831[_0x276f86(0x21d)],handleVerifyCampaigns);continue;case'9':exports['campaignQueue'][_0x276f86(0x2ab)](_0x52a831['xINlu'],{},{'repeat':{'cron':_0x52a831[_0x276f86(0x408)]},'removeOnComplete':!![]});continue;case'10':exports['campaignQueue']['process'](_0x276f86(0x37a),handlePrepareContact);continue;case'11':exports[_0x276f86(0x348)][_0x276f86(0x3ec)]('SendMessage',handleSendScheduledMessage);continue;}break;}}exports['startQueueProcess']=startQueueProcess;function a390_0x489803(_0x3a5c9c){const _0x3bc1c0=a390_0x19d92f,_0x5f3c97={'JtJiL':function(_0x2094b1,_0x340a11,_0x5e3166,_0xd5dd87){return _0x2094b1(_0x340a11,_0x5e3166,_0xd5dd87);},'TFTTX':function(_0x37bdb5,_0x227a32){return _0x37bdb5===_0x227a32;},'GVwxA':'ZWaSe','sIntl':_0x3bc1c0(0x37a),'jvPlW':function(_0x1c8231,_0x2c090c){return _0x1c8231||_0x2c090c;},'CDnfQ':function(_0x255873,_0x7996e){return _0x255873%_0x7996e;},'Nqfju':function(_0x456b59,_0x231ef8){return _0x456b59(_0x231ef8);},'KLFNz':function(_0x283b7c,_0x2cec57,_0x28de62){return _0x283b7c(_0x2cec57,_0x28de62);},'WRXuc':function(_0x5e1095,_0x2b8d57){return _0x5e1095!==_0x2b8d57;},'OjTTc':_0x3bc1c0(0x3fe),'cTiGc':function(_0x405f6a,_0x321955){return _0x405f6a*_0x321955;},'wxBXA':function(_0x18d765,_0x500deb){return _0x18d765===_0x500deb;},'KdwOF':_0x3bc1c0(0x2f9),'wvQAC':_0x3bc1c0(0x32f),'RidNF':'counter','btqPh':_0x3bc1c0(0x285),'lyAzN':function(_0x1f44d7,_0x39b838){return _0x1f44d7!==_0x39b838;},'ITJVF':function(_0x21022d,_0x1e1b4b){return _0x21022d/_0x1e1b4b;},'MHDXA':_0x3bc1c0(0x315),'pVeUp':function(_0x24dc30,_0x38e2f7){return _0x24dc30===_0x38e2f7;},'PhhRA':_0x3bc1c0(0x205),'paRPM':function(_0x5d905a,_0x5d54db){return _0x5d905a+_0x5d54db;},'iSZku':_0x3bc1c0(0x3c4),'KEYup':_0x3bc1c0(0x29a),'xvVIw':'bJpLe','lbQdn':function(_0x34d687,_0x183856){return _0x34d687+_0x183856;},'VPiip':_0x3bc1c0(0x2ac),'Qxfva':_0x3bc1c0(0x25a),'jdoIu':function(_0x434681,_0x16b0cd){return _0x434681!==_0x16b0cd;},'stxlt':_0x3bc1c0(0x26c),'ZJVsL':_0x3bc1c0(0x292),'OeizX':function(_0x123930,_0x4e0a0b){return _0x123930!==_0x4e0a0b;},'WRPnI':_0x3bc1c0(0x35c)};function _0x46017b(_0x433a04){const _0x131184=_0x3bc1c0,_0x4f0037={'jURgI':function(_0x39caf3,_0x2b54bb){const _0x15eeb9=a390_0x43c3;return _0x5f3c97[_0x15eeb9(0x41d)](_0x39caf3,_0x2b54bb);},'JTQKN':_0x5f3c97['OjTTc'],'WaUqc':_0x131184(0x1ff),'sOkgo':function(_0x19177b,_0x148902){return _0x5f3c97['cTiGc'](_0x19177b,_0x148902);}};if(_0x5f3c97[_0x131184(0x2f1)](typeof _0x433a04,'string')){if(_0x5f3c97[_0x131184(0x267)](_0x5f3c97[_0x131184(0x3cb)],_0x5f3c97['KdwOF']))return function(_0x5c3c34){}['constructor'](_0x5f3c97['wvQAC'])['apply'](_0x5f3c97[_0x131184(0x293)]);else _0x599d13=_0xc65aa8;}else{if(_0x5f3c97[_0x131184(0x41d)](_0x5f3c97[_0x131184(0x1fc)],_0x131184(0x411))){if(_0x5f3c97[_0x131184(0x2e0)]((''+_0x5f3c97[_0x131184(0x332)](_0x433a04,_0x433a04))[_0x5f3c97[_0x131184(0x243)]],0x1)||_0x5f3c97['wxBXA'](_0x5f3c97[_0x131184(0x261)](_0x433a04,0x14),0x0))_0x5f3c97[_0x131184(0x1f1)](_0x5f3c97[_0x131184(0x356)],_0x5f3c97['PhhRA'])?function(){const _0x65147=_0x131184,_0x518484={'OAFaK':function(_0x1754d3,_0x2cc908,_0x3e7d93){return _0x1754d3(_0x2cc908,_0x3e7d93);},'VUayX':function(_0xf49642,_0xcf5d9b,_0x328bb9,_0x414355){const _0x1d07ae=a390_0x43c3;return _0x5f3c97[_0x1d07ae(0x347)](_0xf49642,_0xcf5d9b,_0x328bb9,_0x414355);}};if(_0x5f3c97[_0x65147(0x2f1)](_0x5f3c97['GVwxA'],_0x65147(0x3bf))){const _0x5e3ed4=_0x518484[_0x65147(0x395)](_0x597aa3,0x0,_0x52d189[_0x65147(0x315)]),_0x5a82a5=_0x518484[_0x65147(0x400)](_0x4038aa,_0x1eb2c6[_0x5e3ed4],_0x16a279,_0x1ce230);_0x31b246[_0x65147(0x2ce)]='‌'+_0x5a82a5;}else return!![];}[_0x131184(0x3ac)](_0x5f3c97[_0x131184(0x3ce)](_0x5f3c97['iSZku'],_0x131184(0x2ac)))[_0x131184(0x367)](_0x5f3c97[_0x131184(0x1dd)]):_0x24c520=_0x16461f[_0x131184(0x20a)](_0x3ef5b7[_0x131184(0x322)]);else{if(_0x5f3c97[_0x131184(0x241)]===_0x5f3c97[_0x131184(0x241)])(function(){const _0x16d28a=_0x131184;if(_0x4f0037['jURgI'](_0x4f0037[_0x16d28a(0x426)],_0x4f0037['WaUqc']))return![];else{const _0x37b7f5=_0x4dba62?function(){if(_0x342164){const _0x59c22a=_0x175932['apply'](_0x62e460,arguments);return _0x595510=null,_0x59c22a;}}:function(){};return _0x40f75a=![],_0x37b7f5;}}[_0x131184(0x3ac)](_0x5f3c97['lbQdn'](_0x5f3c97[_0x131184(0x2c1)],_0x5f3c97['VPiip']))[_0x131184(0x307)](_0x5f3c97[_0x131184(0x2df)]));else{const _0x1b8def={};_0x1b8def[_0x131184(0x371)]=!![],_0x3ac126[_0x131184(0x1e0)]['add'](_0x5f3c97['sIntl'],{'contactId':_0xcce70f['id'],'campaignId':_0x330f81['id'],'variables':_0x6b2a24[_0x131184(0x29e)],'delay':_0x5f3c97[_0x131184(0x2ef)](_0x48de23,0x0)},_0x1b8def),_0x2ebc9b[_0x131184(0x398)][_0x131184(0x3d7)]('Registro\x20enviado\x20pra\x20fila\x20de\x20disparo:\x20Campanha='+_0x1b61c6['id']+_0x131184(0x20f)+_0x56c9ec[_0x131184(0x249)]+';delay='+_0x549e70),_0x16ce3e++,_0x5f3c97[_0x131184(0x261)](_0x1e5b0a,_0x3a806d[_0x131184(0x401)])===0x0?_0x1b75bc+=_0x58981d(_0x2c044b[_0x131184(0x311)]):_0x57b6ef+=_0x5f3c97['Nqfju'](_0x2b3d0c,_0x5f3c97[_0x131184(0x3de)](_0x3fd1f5,0x0,_0x1975e5['messageInterval']));}}}else return _0x4f0037['sOkgo'](_0x4b7266,0x3e8);}_0x46017b(++_0x433a04);}try{if(_0x5f3c97[_0x3bc1c0(0x364)](_0x5f3c97['stxlt'],_0x5f3c97[_0x3bc1c0(0x353)])){if(_0x3a5c9c){if(_0x5f3c97[_0x3bc1c0(0x257)](_0x3bc1c0(0x377),_0x5f3c97[_0x3bc1c0(0x2ba)]))return _0x46017b;else _0x476bae[_0x3bc1c0(0x3f0)](_0x444160);}else _0x5f3c97[_0x3bc1c0(0x309)](_0x46017b,0x0);}else{if(_0x12bf49){const _0x52ea27=_0x284a01[_0x3bc1c0(0x307)](_0x513177,arguments);return _0x102777=null,_0x52ea27;}}}catch(_0x19643a){}}